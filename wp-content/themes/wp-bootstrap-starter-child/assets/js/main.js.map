{"version":3,"sources":["main.js","ajax-loader.js","cart.js","checkout-form-validation.js","checkout.js","common.js","country.js","fulfillment.js","search.js","shopAll.js","unboxing.js","apple.js","holiday-landing.js","home.js","login.js","nav.js"],"names":["initializeLazyLoader","container","action","buttonLoad","arguments","length","undefined","btnId","id","document","getElementById","jQuery","after","click","e","attr","currentCount","children","params","count","dataset","ajaxparams","JSON","parse","addClass","sendLazyLoadRequest","stopPropagation","window","scroll","hasClass","scrollPosition","scrollTop","height","elementPosition","offset","top","innerHTML","loadingGif","ajax","url","ajaxUrl","type","beforeSend","xhr","setRequestHeader","data","dataType","success","response","replace","content","removeClass","removeAttr","trim","hide","error","console","sendLoadRequest","style","ajaxheader","display","event","CustomEvent","detail","body","dispatchEvent","addToCart","snackId","quantity","cartString","sessionStorage","getItem","cart","hasOwnProperty","qty","parseInt","setItem","stringify","getCart","checkout","fixSession","newCart","$","each","i","posttype","snackid","cratesize","value","validateCreditCardInputs","number","month","year","cvv","error1","error2","error3","error4","checkCCNumber","ccNum","regex","test","checkExpDate","ccDate","checkCvv","ccCvv","val","doAction","html","validateCreateAccountInputs","email","password","checkEmail","emailAddress","checkPassword","runStripe","stripe","card","submitBtn","APev","CCev","createToken","then","result","text","confirmPaymentText","errorElement","loggedInError","querySelector","textContent","message","backgroundColor","postData","payment_method","token","submitAjaxForm","actionUrl","initializeAjaxForms","unbind","on","preventDefault","submitButton","this","find","first","originalText","ccNumber","ccExpMonth","ccExpYear","errorText1","errorText2","errorText3","errorText4","empty","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","serializeArray","Symbol","iterator","next","done","field","name","err","disableSubmit","async","log","_typeof","args","Array","callbackArguments","runFunction","callback","fadeOut","responseJSON","show_message","alert","complete","fn","apply","loginSuccess","redirect_link","straightRedirect","location","reload","updateCartCounter","oldQty","newQty","remove","append","cartDirectUpdateSuccess","cartSuccess","snack_id","crate_size","appendTo","submit","cartRemovalSuccess","fulfillmentSuccess","printLabelSuccess","labels","forEach","label","open","printedScanform","link","invoiceGenerationSuccess","invoices","invoice","updateShippingSuccess","href","split","updatePaymentSuccess","modal","card_id","updateOrderShippingSuccess","values","index","checkoutUser","submit_link","first_name","last_name","user_address_1","user_address_2","user_city","user_state","user_zip","user_country","checkoutGuestSubmitted","checkoutConfirmPaymentGuest","straightReload","triviaAnswered","Object","percentages","percentage","idx","letter","keys","question_key","css","superlativeSaved","decodeHTMLEntities","user_pick","image","highest_rated","getStarsHTML","rating","element","stars","global_script_vars","template_uri","method","addDrinkSuccess","textArea","createElement","populateSelector","maxStock","is","Math","min","parent","show","optionHtml","nextOrder","setFulfilled","orderIds","ids","runSearch","str","toTitleCase","txt","charAt","toUpperCase","substr","toLowerCase","updateFilters","filters","filterType","snacks","filtersArr","taxonomies","countries","flat","intersection","filter","x","includes","equalHeight","resize","elements","getElementsByClassName","allHeights","elementHeight","clientHeight","push","max","className","updateHistoryState","taxonomy","term","urlParams","has","newUrl","baseUrl","toString","history","replaceState","title","removeFilter","querySelectorAll","checked","prop","initializeStarReviews","starBtns","star","currentTarget","parentNode","opacity","prototype","indexOf","call","elem","ready","containers","clickables","ajaxcontainer","ajaxclickcontainer","addEventListener","origin","r","random","substring","pwd","namespace","stripeAP","total","round","getElementsByName","Stripe","paymentRequestAP","paymentRequest","country","currency","amount","requestPayerName","requestPayerEmail","requestShipping","prButton","create","paymentRequestButton","theme","canMakePayment","mount","ev","methodName","freeShippingMinimum","shippingCost","singlePrice","price","oldTotalSnackPrice","parseFloat","toFixed","newTotalSnackPrice","difference","oldSubTotal","oldGrandTotal","cartItemsCount","userFirst","userLast","userAddress1","userCity","userZip","userPhone","emailErrorText","checkZipcode","zipcode","checkPhone","phoneNum","submitForm","selected_address","siblings","evt","documentElement","animate","base","fontSize","color","hidePostalCode","displayError","selected_source","source","obj","constructor","load","updateSelect","select","selectedIndex","classList","add","change","target","selects","width","tooltip","popover","$target","closest","fadeIn","boxSizeBtns","miniSnackBox","ogSnackBox","famSnackBox","snackQtyMini","snackQtyOg","snackQtyFam","sizeSelected","box","drinkstock","preorder","stock","drinkAddonValue","priceDiffMultiplier","drinkPrice","oldPrice","newPrice","lastBox","last","boxCount","newBox","clone","itemQty","confirmation","confirm","prev","toggleClass","inputType","setTimeout","modalArray","resizeTimer","clearTimeout","headerElem","headerElemHeight","outerHeight","secHeaderHeight","countriesMenuDialog","oldScroll","scrollY","originalEvent","which","currentUrl","URL","pathname","URLSearchParams","search","filterMsg","countrySlug","get","typeSlug","getAttribute","filterTarget","map","el","toggle","seeMoreCat","seeMoreIcon","seeMoreCatText","linGradient","showContent","parentElement","linGradientItem","onresize","size","answers","answer","questionForm","snackPollTriggers","btn","subscription_id","old_plan","currency_code","external_id"],"mappings":"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","file":"main.js","sourcesContent":["\"use strict\";var loadingGif=\"<div class=\\\"loading d-flex align-items-center justify-content-center mx-auto\\\">    \\n<img style=\\\"max-width: 125px;\\\" src=\\\"/wp-content/themes/wp-bootstrap-starter-child/loading.gif\\\">\\n</div>\";var ajaxUrl='/wp-admin/admin-ajax.php';jQuery(document).ready(function(){var containers=jQuery(\"[data-ajaxcontainer]\");var clickables=jQuery(\"[data-ajaxclickparent]\");var lazyloaders=jQuery(\"[data-lazyload='1']\");jQuery(containers).each(function(index,container){var params;if(container.dataset.ajaxparams==''){params={'action':container.dataset.ajaxcontainer};}else{params={'action':container.dataset.ajaxcontainer,'params':JSON.parse(container.dataset.ajaxparams)};}var buttonLoad='buttonlazyload'in container.dataset;if('lazyload'in container.dataset){initializeLazyLoader(container,container.dataset.ajaxcontainer,buttonLoad);}sendLoadRequest(container,params);});jQuery(clickables).each(function(index,parent){jQuery(parent).on('click',function(){var params;var id=jQuery(this).data('ajaxclickparent');if(!document.getElementById(id)){return false;}var container=document.getElementById(id);var buttonLoad='buttonlazyload'in container.dataset;if('lazyload'in container.dataset){initializeLazyLoader(container,container.dataset.ajaxclickcontainer,buttonLoad);}if(!jQuery(container).hasClass('nodata')){if(typeof container.dataset.ajaxheader!='undefined'){document.getElementById(container.dataset.ajaxheader).style.display='block';}if(container.innerHTML.trim()==''){if(container.dataset.ajaxparams==''){params={'action':container.dataset.ajaxclickcontainer};}else{params={'action':container.dataset.ajaxclickcontainer,'params':JSON.parse(container.dataset.ajaxparams)};}sendLoadRequest(container,params);}}else if(typeof container.dataset.ajaxheader!='undefined'){document.getElementById(container.dataset.ajaxheader).style.display='none';}// hide load more btn when accordion is collapsed\nif(jQuery(container).hasClass('show')){jQuery(container).next().removeClass('d-flex').addClass('d-none');}else{jQuery(container).next().removeClass('d-none').addClass('d-flex');}});});});function initializeLazyLoader(container,action){var buttonLoad=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(buttonLoad){var btnId=\"loadMore_\"+action+\"_\"+container.id;if(!document.getElementById(btnId)){jQuery(container).after(\"<div class='d-flex align-items-center justify-content-center px-3 pb-4'><button id='\"+btnId+\"' class='load-more-btn btn btn-sm btn-secondary text-white font-weight-semibold text-capitalize mb-4 w-100'>Load More</button></div>\");jQuery(\"#\"+btnId).click(function(e){jQuery(\"#\"+btnId).attr('disabled','disabled');var currentCount=jQuery(container).children('[data-lazyelement]').length;var params={'count':currentCount,'action':action,'params':container.dataset.ajaxparams==''?null:JSON.parse(container.dataset.ajaxparams)};jQuery(container).addClass('lazyloading');sendLazyLoadRequest(container,params);e.stopPropagation();});}}else{jQuery(window).scroll(function(){if(jQuery(container).hasClass('show')&&!jQuery(container).hasClass('lazyloading')&&!jQuery(container).hasClass('lazyloadingcomplete')){var currentCount=jQuery(container).children('[data-lazyelement]').length;var scrollPosition=jQuery(window).scrollTop()+jQuery(window).height();var elementPosition=jQuery(container).offset().top+jQuery(container).height();if(scrollPosition>elementPosition){var params={'count':currentCount,'action':action,'params':container.dataset.ajaxparams==''?null:JSON.parse(container.dataset.ajaxparams)};jQuery(container).addClass('lazyloading');sendLazyLoadRequest(container,params);}}});}}function sendLazyLoadRequest(container,params){container.innerHTML+=loadingGif;jQuery.ajax({url:ajaxUrl,type:\"POST\",beforeSend:function beforeSend(xhr){xhr.setRequestHeader('csrf_token',jQuery('meta[name=\"csrf-token\"]').attr('content'));},data:params,dataType:'json',success:function success(response){container.innerHTML=container.innerHTML.replace(loadingGif,'');container.innerHTML+=response.data.content;jQuery(container).removeClass('lazyloading');var btnId=\"loadMore_\"+params.action+\"_\"+container.id;jQuery(\"#\"+btnId).removeAttr('disabled');if(response.data.content.trim()==''){jQuery(container).addClass('lazyloadingcomplete');// nothing left to load\njQuery(\"#\"+btnId).hide();//.attr('disabled', 'disabled').attr('title', 'No more content to load.');\n}},error:function error(response){console.error('Error: ',response);}});}function sendLoadRequest(container,params){container.innerHTML=loadingGif;jQuery.ajax({url:ajaxUrl,type:\"POST\",beforeSend:function beforeSend(xhr){xhr.setRequestHeader('csrf_token',jQuery('meta[name=\"csrf-token\"]').attr('content'));},data:params,dataType:'json',success:function success(response){container.innerHTML=response.data.content;container.style.height='auto';if(typeof container.dataset.ajaxheader!='undefined'){if(response.data.content.trim()==''){document.getElementById(container.dataset.ajaxheader).style.display='none';jQuery(container).addClass(\"nodata\");}else{document.getElementById(container.dataset.ajaxheader).style.display='block';}}var event=new CustomEvent(\"containerLoaded\",{detail:container.dataset});document.body.dispatchEvent(event);},error:function error(response){console.error('Error: ',response);}});}\n'use strict';document.addEventListener('AppleIDSignInOnSuccess',function(data){var detail=data.detail;detail.origin='login';jQuery.ajax({url:\"/wp-content/themes/wp-bootstrap-starter-child/lib/AppleSignin.php\",type:\"POST\",beforeSend:function beforeSend(xhr){xhr.setRequestHeader('csrf_token',jQuery('meta[name=\"csrf-token\"]').attr('content'));},data:detail,dataType:\"json\",async:true,success:function success(response){var r=(Math.random()+1).toString(36).substring(2);var actionUrl=\"/wp-admin/admin-ajax.php\";var postData={'pwd':r,'email':response.data.email,'method':'AppleID','action':'sc_login'};submitAjaxForm(actionUrl,postData,'');},error:function error(_error){console.error('Error: ',_error);jQuery(\".form-error\").show().text(_error.responseJSON.data);}});});//Listen for authorization failures\ndocument.addEventListener('AppleIDSignInOnFailure',function(error){console.error(error);});var CCev=false;var APev=false;jQuery(document).ready(function(){if(document.body.dataset.namespace=='checkout-confirm-pay'){var stripeAP;var total=parseInt(Math.round(document.getElementsByName('total_amount')[0].value*100));if(window.location.href.indexOf('local')!==-1||window.location.href.indexOf('snackbar')!==-1||window.location.href.indexOf('candybar-dev')!==-1){stripeAP=Stripe('pk_test_n3rrzyh2ClIZlnCntL9X8IRx');}else{stripeAP=window.Stripe('pk_live_3L8cvOKHqpOpDF3JXfZqZTd2');}var paymentRequestAP=stripeAP.paymentRequest({country:'US',currency:'usd',total:{label:\"SnackCrate\",amount:total},requestPayerName:false,requestPayerEmail:false,requestShipping:false});var elements=stripeAP.elements();var prButton=elements.create('paymentRequestButton',{paymentRequest:paymentRequestAP,style:{paymentRequestButton:{type:'default',// default: 'default'\ntheme:'dark',// default: 'dark'\nheight:'56px'// default: '40px', the width is always '100%'\n}}});// Check the availability of the Payment Request API first.\npaymentRequestAP.canMakePayment().then(function(result){if(result){prButton.mount('#payment-request-button-applepay');document.getElementById('apple-pay-window').style.display='block';}else{document.getElementById('apple-pay-window').style.display='none';}});paymentRequestAP.on('token',function(ev){// Send the token to your server to charge it!\nconsole.log(ev);ev.complete('success');CCev=false;APev=ev;var response=APev?APev:CCev;var actionUrl=\"/wp-admin/admin-ajax.php\";var postData={'action':'sc_confirm_payment','payment_method':response.methodName,'token':response.token.id};submitAjaxForm(actionUrl,postData,'');});paymentRequestAP.on('cancel',function(ev){// Send the token to your server to charge it!\nconsole.log('fail');ev.complete('fail');});}});\n\"use strict\";var freeShippingMinimum=35;var shippingCost=4.99;jQuery(document).ready(function(){var $=jQuery;if(document.body.dataset.namespace=='shopping-cart'){if(sessionStorage.getItem(\"cart\")==null){fixSession();}$(\".ajax_form\").on('submit',function(event){if($(this).attr('id')=='removeFromCart'){var snackId=$(this).find(\"input[name='snack_id']\").val();$(\"#cartQty_\"+snackId).remove();}});$(\".cartQty, .mobileCartQty\").on(\"change\",function(e){var newQty=e.currentTarget.value;var singlePrice=e.currentTarget.dataset.price;var snackId=e.currentTarget.dataset.snackid;if(parseInt(newQty)>parseInt(e.currentTarget.max)){newQty=e.currentTarget.max;jQuery(\"#mobileCartQty_\"+snackId).val(newQty);jQuery(\"#cartQty_\"+snackId).val(newQty);}var oldTotalSnackPrice=parseFloat($(\"#totalPrice_\"+snackId).text().replace(',','')).toFixed(2);var newTotalSnackPrice=parseFloat(newQty*singlePrice).toFixed(2);$(\"#totalPrice_\"+snackId).text(newTotalSnackPrice);$(\"#mobileTotalPrice_\"+snackId).text(newTotalSnackPrice);var difference=oldTotalSnackPrice-newTotalSnackPrice;var oldSubTotal=parseFloat($(\"#subTotal\").text().replace(',','')).toFixed(2);var oldGrandTotal=parseFloat($(\"#grandTotal\").text().replace(',','')).toFixed(2);$(\"#subTotal\").text((oldSubTotal-difference).toFixed(2));$(\"#grandTotal\").text((oldGrandTotal-difference).toFixed(2));if(oldSubTotal>=freeShippingMinimum&&oldSubTotal-difference<freeShippingMinimum){$(\"#grandTotal\").text(parseFloat(oldGrandTotal-difference+shippingCost).toFixed(2));$(\"#shippingTotal\").text('$'+shippingCost);}else if(oldSubTotal<freeShippingMinimum&&oldSubTotal-difference>=freeShippingMinimum){$(\"#grandTotal\").text(parseFloat(oldGrandTotal-difference-shippingCost).toFixed(2));$(\"#shippingTotal\").text('FREE');}var cartItemsCount=0;$(\".cartQty\").each(function(i,e){cartItemsCount+=parseInt(e.value);});$(\"#cart-counter > p\").text(cartItemsCount);var newCart={};$(\".cartQty\").each(function(i,e){switch(e.dataset.posttype){case'collection':case'country':newCart[e.dataset.snackid]={};newCart[e.dataset.snackid][e.dataset.cratesize]=parseInt(e.value);break;default:newCart[e.dataset.snackid]=parseInt(e.value);break;}});sessionStorage.setItem(\"cart\",JSON.stringify(newCart));var actionUrl=\"/wp-admin/admin-ajax.php\";var postData={'action':'sc_update_cart','cart':JSON.stringify(newCart)};jQuery.ajax({async:false,url:actionUrl,type:\"POST\",beforeSend:function beforeSend(xhr){xhr.setRequestHeader('csrf_token',jQuery('meta[name=\"csrf-token\"]').attr('content'));},data:postData,dataType:'json',success:function success(response){console.log(response);},error:function error(_error){Object.keys(_error).forEach(function(index){console.log(index,_error[index]);});}});});}});function addToCart(snackId,quantity){var cartString=window.sessionStorage.getItem('cart');var cart=JSON.parse(cartString);if(cart==null){cart={};}if(cart.hasOwnProperty(snackId)){cart[snackId].qty+=parseInt(quantity);}else{cart[snackId]={qty:parseInt(quantity)};}window.sessionStorage.setItem('cart',JSON.stringify(cart));}function getCart(){var cartString=window.sessionStorage.getItem('cart');var cart=JSON.parse(cartString);}function checkout(){}function fixSession(){var newCart={};$(\".cartQty\").each(function(i,e){switch(e.dataset.posttype){case'collection':case'country':newCart[e.dataset.snackid]={};newCart[e.dataset.snackid][e.dataset.cratesize]=parseInt(e.value);break;default:newCart[e.dataset.snackid]=parseInt(e.value);break;}});sessionStorage.setItem(\"cart\",JSON.stringify(newCart));}\n'use strict';jQuery(document).ready(function(){var $=jQuery;var email=$('#email');var userFirst=$('#firstname');var userLast=$('#lastname');var userAddress1=$('#address_1');var userCity=$('#city');var userZip=$('#zipcode');var userPhone=$('#phone');var errorText1=$('.form-error-1');var errorText2=$('.form-error-2');var errorText3=$('.form-error-3');var errorText4=$('.form-error-4');var emailErrorText=$('.email-exists-error');// guestCheckoutForm validation\n$(\".guest-checkout-form\").on('submit',function(e){$(emailErrorText).addClass(\"d-none\");e.preventDefault();var submitBtn=$(\".guest-checkout-form\").find('[type=\"submit\"]').first();var originalText=jQuery(submitBtn).text();jQuery(submitBtn).attr('disabled','disabled');jQuery(submitBtn).text('');jQuery(submitBtn).html('<div class=\"spinner-border text-light\" role=\"status\">\\n        <span class=\"sr-only\">Loading...</span>\\n      </div>');var submitForm=true;// check if any inputs were left blank\nif(userFirst.val().length===0||userLast.val().length===0||email.val().length===0||userAddress1.val().length===0||userCity.val().length===0||userZip.val().length===0||userPhone.val().length===0){submitForm=false;errorText1.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">One or more fields were left blank</p>');}else{errorText1.html('');}// check if userZip is at least 5 digits\nfunction checkZipcode(zipcode){var regex=/^\\d{5}$/;return regex.test(zipcode);}if(!checkZipcode(userZip.val())){submitForm=false;errorText2.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Zipcode must be 5 digits</p>');}else{errorText2.html('');}// check if userPhone is at least 10 digits\nfunction checkPhone(phoneNum){var regex=/^\\d{10}$/;return regex.test(phoneNum);}if(!checkPhone(userPhone.val())){submitForm=false;errorText4.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Phone number must be 10 digits</p>');}else{errorText4.html('');}// check if email address is valid\nfunction checkEmail(emailAddress){var regex=/^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,6})+$/;return regex.test(emailAddress);}if(!checkEmail(email.val())){submitForm=false;errorText3.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Please enter a valid email address</p>');}else{errorText3.html('');}if(submitForm){$.ajax({url:'/wp-admin/admin-ajax.php',type:\"POST\",async:false,data:{email:email.val(),action:'sc_check_guest_email'},dataType:'json',success:function success(response){console.log(e);if(response.data===true){emailErrorText.html('<p class=\"mb-2 mb-md-3 text-danger\">Oops! It looks like an account with that email already exists. Please <a class=\"text-danger text-decoration-underline\" href=\"https://account.snackcrate.com\" target=\"_blank\">Sign In</a> or try a different email address.</p>');$(emailErrorText).removeClass(\"d-none\");return false;}else{var postData={};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=$(\".guest-checkout-form\").serializeArray()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var field=_step.value;postData[field.name]=field.value;}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}submitAjaxForm('/wp-admin/admin-ajax.php',postData,originalText,submitBtn);}},error:function error(_error){}});}else{jQuery(this).find('[type=\"submit\"]').first().removeAttr('disabled');jQuery(this).find('[type=\"submit\"]').first().html('');jQuery(this).find('[type=\"submit\"]').first().text(originalText);}});});var $=jQuery;var doAction=void 0;function validateCreditCardInputs(number,month,year,cvv,error1,error2,error3,error4){// check if any inputs were left blank\nif(number.val().length===0||month.val().length===0||year.val().length===0||cvv.val().length===0){doAction=false;error1.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">One or more fields were left blank</p>');}else{error1.html('');doAction=true;}// check if ccNumber is 13-16 digits\nfunction checkCCNumber(ccNum){var regex=/^\\b\\d{13,16}\\b$/;return regex.test(ccNum);}if(!checkCCNumber(number.val())){doAction=false;error2.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Credit card number must be between 13 - 16 digits</p>');}else{error2.html('');doAction=true;}// check if ccExpMonth and ccExpYear are 2 digits\nfunction checkExpDate(ccDate){var regex=/^\\d{2}$/;return regex.test(ccDate);}if(!checkExpDate(month.val())||!checkExpDate(year.val())){doAction=false;error3.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Expiration month and year must each be 2 digits</p>');}else{error3.html('');doAction=true;}// check if CVV are 3-4 digits\nfunction checkCvv(ccCvv){var regex=/^\\b\\d{3,4}\\b$/;return regex.test(ccCvv);}if(!checkCvv(cvv.val())){doAction=false;error4.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">CVV must be 3 - 4 digits</p>');}else{error4.html('');doAction=true;}return doAction;}function validateCreateAccountInputs(email,password,error1,error2,error3){// check if any inputs were left blank\nif(email.val().length===0||password.val().length===0){doAction=false;error1.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">One or more fields were left blank</p>');}else{error1.html('');doAction=true;}// check if email address is valid\nfunction checkEmail(emailAddress){var regex=/^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,6})+$/;return regex.test(emailAddress);}if(!checkEmail(email.val())){doAction=false;error2.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Please enter a valid email address</p>');}else{error2.html('');doAction=true;}// check if password is valid\nfunction checkPassword(password){var regex=/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/;return regex.test(password);}if(!checkPassword(password.val())){doAction=false;error3.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Passwords must be longer than eight characters and include at least one uppercase letter, one lowercase letter, and one number</p>');}else{error3.html('');doAction=true;}return doAction;}\n\"use strict\";var actionUrl=\"/wp-admin/admin-ajax.php\";var confirmPaymentText=\"Place Order\";jQuery(document).ready(function(){var $=jQuery;if(document.body.dataset.namespace=='checkout-guest'||document.body.dataset.namespace=='checkout-confirm-shipping'){$(\"#billing_same\").on('change',function(){if($(this).is(':checked')){$(\"#billing_block\").addClass(\"d-none\");}else{$(\"#billing_block\").removeClass(\"d-none\");}});$(\"[data-addressid]\").on('click',function(){var selected_address=$(this).data('addressid');if(selected_address!=0){$(\"input[name='shipping_address']\").val(selected_address);$(this).siblings().removeClass('selected');$(\"[data-addressid=\"+selected_address+\"]\").addClass('selected');}});var emailErrorText=$('.email-exists-error');$(\"#email\").on('change',function(){$.ajax({url:actionUrl,type:\"POST\",data:{email:$(\"#email\").val(),action:'sc_check_guest_email'},dataType:'json',success:function success(response){if(response.data===true){emailErrorText.html('<p class=\"mb-2 mb-md-3 text-danger\">Oops! It looks like an account with that email already exists. Please <a id=\"scrollToLogin\" class=\"text-danger text-decoration-underline\" href=\" #guestCheckoutSignin\">Sign In</a> or try a different email address.</p>');$(emailErrorText).removeClass(\"d-none\");$(\"#scrollToLogin\").on('click',function(evt){evt.preventDefault();if($(\"#guestCheckoutSignin:visible\").length==0){$(\"#userAccount\").click();}else{$(\"#guestCheckoutSignin\").addClass(\"border border-danger\");$([document.documentElement,document.body]).animate({scrollTop:$(\"#guestCheckoutSignin\").offset().top-80},500);}});return false;}else{$(emailErrorText).addClass(\"d-none\");}}});});}else if(document.body.dataset.namespace=='checkout-confirm-pay'){var style={base:{fontSize:'16px',color:\"#32325d\"}};var stripe;if(window.location.href.indexOf('local')!==-1||window.location.href.indexOf('snackbar')!==-1||window.location.href.indexOf('candybar-dev')!==-1){stripe=window.Stripe('pk_test_n3rrzyh2ClIZlnCntL9X8IRx');}else{stripe=window.Stripe('pk_live_3L8cvOKHqpOpDF3JXfZqZTd2');}var elements=stripe.elements();var card=elements.create('card',{'hidePostalCode':true,'style':style});card.mount('#card-element');card.addEventListener('change',function(event){var displayError=document.getElementById('card-errors');if(event.error){displayError.textContent=event.error.message;}else{displayError.textContent='';}});if($(\"[data-card]\").length>0){$(\"[data-card]\").on('click',function(){var selected_source=$(this).data('card');if(selected_source!=0){$(\"input[name='source']\").val(selected_source);$(this).siblings().removeClass('selected');$(\"[data-card=\"+selected_source+\"]\").addClass('selected');}});$(\"#newCustomerCard\").on('submit',function(event){event.preventDefault();var submitBtn=$(this).find('[type=\"submit\"]').first();disableSubmit(submitBtn);stripe.createToken(card).then(function(result){if(result.error){jQuery(submitBtn).removeAttr(\"disabled\").text(\"Save\");// Inform the customer that there was an error.\nvar errorElement=document.getElementsByClassName('form-error')[0];errorElement.textContent=result.error.message;$('#signup-customer').removeClass('avoid-clicks');}else{var postData={'name':$(\"#ccNameUpdate\").val(),'action':'sc_update_payment_method','token':result.token.id};submitAjaxForm(actionUrl,postData,\"Save\",submitBtn);}});});$(\"#confirmPaymentForm\").on('submit',function(event){event.preventDefault();var submitBtn=$(this).find('[type=\"submit\"]').first();var postData={'action':'sc_confirm_payment','source':$(\"[name='source']\").val()};disableSubmit(submitBtn);submitAjaxForm(actionUrl,postData,confirmPaymentText,submitBtn);});}else{$(\"#confirmPaymentForm\").on('submit',function(event){event.preventDefault();var submitBtn=$(this).find('[type=\"submit\"]').first();disableSubmit(submitBtn);runStripe(stripe,card,submitBtn);});}}});function runStripe(stripe,card,submitBtn){APev=false;CCev=false;stripe.createToken(card).then(function(result){if(result.error){jQuery(submitBtn).removeAttr(\"disabled\").text(confirmPaymentText);// Inform the customer that there was an error.\nvar errorElement=document.getElementById('card-errors');var loggedInError=document.querySelector('.loggedInCardErrors');errorElement.textContent=result.error.message;loggedInError.style.backgroundColor='#DC3545';loggedInError.textContent=result.error.message;$('#signup-customer').removeClass('avoid-clicks');}else{document.querySelector('.placeOrderCheckout').textContent=\"Processing...\";var postData={'action':'sc_confirm_payment','payment_method':'card','token':result.token.id};submitAjaxForm(actionUrl,postData,confirmPaymentText,submitBtn);}});}\n'use strict';var _typeof=typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj;};var email=$('#user_email');var password=$('#user_password');var ccNumber=$('#ccNumber');var ccExpMonth=$('#ccExpMonth');var ccExpYear=$('#ccExpYear');var ccCvv=$('#ccCvv');var errorText1=$('.form-error-1');var errorText2=$('.form-error-2');var errorText3=$('.form-error-3');var errorText4=$('.form-error-4');jQuery(window).load(function(){jQuery(\"[type='submit']\").each(function(){jQuery(this).css('pointer-events','auto').css('opacity',1);});// take the select to change as a parameters\nfunction updateSelect(select){// get the index of the selected option\nvar index=select.selectedIndex;// check if the first option is selected (index 0)\nif(index===0){// if selected, add 'grey' class to change text color\nselect.classList.remove('text-dark');}else{// if not selected, remove 'grey' class\nselect.classList.add('text-dark');}}// Event listener fo the select 'change' event\nfunction change(event){// get the changed select from the event object\nvar select=event.target;// update this select\nupdateSelect(select);}// find all the 'select' elements\nvar selects=document.querySelectorAll('select');// for each select, add change event listener and update them\nselects.forEach(function(select){// add change listener\nselect.addEventListener('change',change);// update select\nupdateSelect(select);});// adjust position of shipping-truck based on width of progress\nif($(window).width()<992){if($('.progress').width()<$('.shipping-truck').width()-15){$('.shipping-truck').css('left','0');}else{$('.shipping-truck').css('left','calc(100% - 47px)');}if($('.progress').width()<$('.progress-bar').width()){$('.progress-bar').css('width','100%');}else{$('.progress-bar').css('width','calc(100% - 15px)');}}else{if($('.progress').width()<$('.shipping-truck').width()-22){$('.shipping-truck').css('left','0');}else{$('.shipping-truck').css('left','calc(100% - 70px)');}if($('.progress').width()<$('.progress-bar').width()){$('.progress-bar').css('width','100%');}else{$('.progress-bar').css('width','calc(100% - 22px)');}}});jQuery(document).ready(function(){var $=jQuery;$(function(){$('[data-toggle=\"tooltip\"]').tooltip();});$(function(){$('[data-toggle=\"popover\"]').popover({html:true});});// close predictive search window if a click outside of that element occurs\n$(document).click(function(event){var $target=$(event.target);if(!$target.closest('#predictive-search').length&&$('#predictive-search').is(\":visible\")){$('#predictive-search').hide();}});$(\".appleid-signin\").on('click',function(e){$(\"#appleid-signin\").click();});// add back-to-top button on every page after #primary section\n$('#primary').after('<a style=\"z-index: 100;\" aria-label=\"click to scroll back to top\" id=\"back-to-top\" href=\"#\" class=\"btn btn-primary btn-lg-md back-to-top text-white shadow-sm\" role=\"button\"><i class=\"fas fa-chevron-up\"></i></a>');// fade back-to-top btn in and out based on user scroll\n$(window).scroll(function(){if($(this).scrollTop()>50){$('#back-to-top').fadeIn();}else{$('#back-to-top').fadeOut();}});// scroll body to 0px on click\n$('#back-to-top').click(function(){$('body,html').animate({scrollTop:0},400);return false;});initializeAjaxForms();document.body.addEventListener('containerLoaded',function(e){initializeAjaxForms();});});function initializeAjaxForms(){$(\".ajax_form\").unbind('submit');$(\".ajax_form\").on('submit',function(e){e.preventDefault();var doAction=true;var submitButton=jQuery(this).find('[type=\"submit\"]').first();var originalText=jQuery(submitButton).text();jQuery(this).find('[type=\"submit\"]').first().attr('disabled','disabled');jQuery(this).find('[type=\"submit\"]').first().text('');jQuery(this).find('[type=\"submit\"]').first().html('<div class=\"spinner-border text-light\" role=\"status\">\\n        <span class=\"sr-only\">Loading...</span>\\n      </div>');// credit card input validation\nif(ccNumber.val()!=undefined&&ccExpMonth.val()!=undefined&&ccExpYear.val()!=undefined&&ccCvv.val()!=undefined&&$(this).attr('id')!=='guestCheckout'){doAction=validateCreditCardInputs(ccNumber,ccExpMonth,ccExpYear,ccCvv,errorText1,errorText2,errorText3,errorText4);}// create account input validation \nif(email.val()!=undefined&&password.val()!=undefined&&$(this).attr('id')!=='guestCheckout'){doAction=validateCreateAccountInputs(email,password,errorText1,errorText2,errorText3);}if(doAction){var actionUrl=$(this).attr('action');$(\".form-error\").empty();var postData={};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=$(this).serializeArray()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var field=_step.value;postData[field.name]=field.value;}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}submitAjaxForm(actionUrl,postData,originalText,submitButton);}else{jQuery(submitButton).removeAttr('disabled');jQuery(submitButton).html('');jQuery(submitButton).text(originalText);}});}function disableSubmit(submitBtn){jQuery(submitBtn).attr('disabled','disabled');jQuery(submitBtn).html('<div class=\"spinner-border text-light\" role=\"status\">\\n        <span class=\"sr-only\">Loading...</span>\\n        </div>');}function submitAjaxForm(actionUrl,postData,originalText,submitButton){jQuery.ajax({url:actionUrl,type:\"POST\",async:false,beforeSend:function beforeSend(xhr){xhr.setRequestHeader('csrf_token',jQuery('meta[name=\"csrf-token\"]').attr('content'));},data:postData,dataType:'json',success:function success(response){console.log('Success: ',response);if(_typeof(response.data)==='object'&&'callback'in response.data){var args=new Array();if('callbackArguments'in response.data){args=response.data.callbackArguments;// callbackArguments MUST be passed as an array from PHP. \n// And as an array of arrays if there are multiple variables needed.\n}runFunction(response.data.callback,args);}else{console.log('Nothing left to do.');}jQuery('.loading_wrapper').fadeOut();},error:function error(response){console.error(response);//jQuery(\".form-error\").html(`<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">${response.responseJSON.data}</p>`);\nif(_typeof(response.responseJSON.data)==='object'&&'show_message'in response.responseJSON.data&&'message'in response.responseJSON.data&&response.responseJSON.data.show_message===true){alert(response.responseJSON.data.message);jQuery(submitButton).removeAttr('disabled');}else{jQuery(\".form-error\").html('<p class=\"mw-100 text-center mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">An error occurred while processing your request.</p>');var errorElement=document.getElementById('card-errors');var loggedInError=document.querySelector('.loggedInCardErrors');errorElement.textContent=response.responseJSON.data;loggedInError.style.backgroundColor='#DC3545';loggedInError.textContent=response.responseJSON.data;}if(document.getElementById(\"packError\")){jQuery(\"#packError\").text(response.responseJSON.data);}jQuery('.loading_wrapper').fadeOut();},complete:function complete(){jQuery(submitButton).removeAttr('disabled');jQuery(submitButton).html(originalText);}});}function runFunction(name,args){var fn=window[name];if(typeof fn!=='function')return;fn.apply(window,args);}function loginSuccess(args){if(args.redirect_link!=''){straightRedirect(args);}else{window.location.reload();}}function updateCartCounter(quantity){if(document.getElementById(\"cart-counter\")){var oldQty=document.getElementById(\"cart-counter\").textContent;var newQty=parseInt(oldQty)+parseInt(quantity);document.getElementById(\"cart-counter\").textContent=newQty;if(newQty===0){jQuery(\"#cart-counter\").remove();}}else{jQuery(\"#userCart\").append(\"<div id='cart-counter'>\"+quantity+\"</div>\");}}function cartDirectUpdateSuccess(args){sessionStorage.setItem(\"cart\",args.cart);}function cartSuccess(args){updateCartCounter(args.quantity);sessionStorage.setItem(\"cart\",args.cart);jQuery('<form action=\"/added-to-cart\" method=\"POST\"/>').append(jQuery('<input type=\"hidden\" name=\"snack_id\">').val(args.snack_id)).append(jQuery('<input type=\"hidden\" name=\"crate_size\">').val(args.crate_size)).append(jQuery('<input type=\"hidden\" name=\"quantity\">').val(args.quantity)).appendTo(jQuery(document.body)).submit();}function cartRemovalSuccess(args){updateCartCounter(args.quantity*-1);sessionStorage.setItem(\"cart\",args.cart);window.location.reload();}function fulfillmentSuccess(){window.location.reload();}function printLabelSuccess(args){var i=0;args.labels.forEach(function(label){i++;window.open(label,'_blank');});}function printedScanform(args){window.open(args.link,'_blank');window.location.reload();}function invoiceGenerationSuccess(args){args.invoices.forEach(function(invoice){window.open(invoice,'_blank');});window.location.reload();}function updateShippingSuccess(args){window.location.href=window.location.href.split('?')[0]+\"?selected_address=\"+args.id;}function updatePaymentSuccess(args){jQuery('.modal').modal('hide');window.location.href=window.location.href.split('?')[0]+\"?p=\"+args.card_id;}function updateOrderShippingSuccess(args){jQuery(\"input[name='shipping_address']\").val(args.data);var values=JSON.parse(args.data);for(var index in values){var value=values[index];console.log(value,index);console.log(jQuery(\"[data-shippingfield='\"+index+\"']\"));jQuery(\"[data-shippingfield='\"+index+\"']\").text(value);if(index==='address_2'&&value.length==0){jQuery(\"[data-shippingfield='address_2']\").addClass(\"d-none\");}else if(index==='address_2'&&value.length>0){jQuery(\"[data-shippingfield='address_2']\").removeClass(\"d-none\");}}jQuery('.modal').modal('hide');}function checkoutUser(args){jQuery('<form action=\"'+args.submit_link+'\" method=\"POST\"/>').append(jQuery('<input type=\"hidden\" name=\"email\">').val(args.email)).append(jQuery('<input type=\"hidden\" name=\"first_name\">').val(args.first_name)).append(jQuery('<input type=\"hidden\" name=\"last_name\">').val(args.last_name)).append(jQuery('<input type=\"hidden\" name=\"user_address_1\">').val(args.user_address_1)).append(jQuery('<input type=\"hidden\" name=\"user_address_2\">').val(args.user_address_2)).append(jQuery('<input type=\"hidden\" name=\"user_city\">').val(args.user_city)).append(jQuery('<input type=\"hidden\" name=\"user_state\">').val(args.user_state)).append(jQuery('<input type=\"hidden\" name=\"user_zip\">').val(args.user_zip)).append(jQuery('<input type=\"hidden\" name=\"user_country\">').val(args.user_country)).appendTo(jQuery(document.body)).submit();}function checkoutGuestSubmitted(args){jQuery('<form action=\"'+args.submit_link+'\" method=\"POST\"/>').append(jQuery('<input type=\"hidden\" name=\"email\">').val(args.email)).append(jQuery('<input type=\"hidden\" name=\"first_name\">').val(args.first_name)).append(jQuery('<input type=\"hidden\" name=\"last_name\">').val(args.last_name)).appendTo(jQuery(document.body)).submit();}function checkoutConfirmPaymentGuest(args){jQuery('<form action=\"'+args.submit_link+'\" method=\"POST\"/>').append(jQuery('<input type=\"hidden\" name=\"data\">').val(args.data)).appendTo(jQuery(document.body)).submit();}function straightRedirect(args){window.location.href=args.redirect_link;}function straightReload(){window.location.reload();}function triviaAnswered(args){Object.values(args.percentages).forEach(function(percentage,idx){var letter=Object.keys(args.percentages)[idx];jQuery(\"#triviaQuestion\"+args.question_key).find(\"button[data-answer='\"+letter+\"'] .user-percentage\").css(\"width\",percentage+\"%\");});}function superlativeSaved(args){$('.'+args.type+'-picks').addClass('d-flex').removeClass('d-none');$('.'+args.type+'-snack').addClass('d-none').removeClass('d-flex');$('#snackPollModal').modal('hide');$('[data-elementrole=\"'+args.type+'-user-image\"]').attr(\"alt\",\"image of \"+decodeHTMLEntities(args.user_pick.name)).attr(\"src\",args.user_pick.image);$('[data-elementrole=\"'+args.type+'-user-name\"]').text(decodeHTMLEntities(args.user_pick.name));$('[data-elementrole=\"'+args.type+'-popular-image\"]').attr(\"alt\",\"image of \"+decodeHTMLEntities(args.highest_rated.name)).attr(\"src\",args.highest_rated.image);$('[data-elementrole=\"'+args.type+'-popular-name\"]').text(decodeHTMLEntities(args.highest_rated.name));getStarsHTML(args.user_pick.rating,'.'+args.type+'-picks .your-pick .review-stars');getStarsHTML(args.highest_rated.rating,'.'+args.type+'-picks .popular-pick .review-stars');}function getStarsHTML(rating,element){rating=rating==''?0:rating;$(element).html('');var url;var stars='';for(var i=1;i<=5;i++){if(rating>=i){url=global_script_vars.template_uri+'/template-parts/full-star-svg.php';}else if(rating>=i-.75){url=global_script_vars.template_uri+'/template-parts/half-star-svg.php';}else{url=global_script_vars.template_uri+'/template-parts/empty-star-svg.php';}$.ajax({method:\"GET\",url:url,async:false,dataType:'html',success:function success(data){$(element).append(data);stars+=data;}});}}function addDrinkSuccess(){jQuery('#addDrinkUpgrade').html('').removeClass('btn-secondary').addClass('btn-success').text('Drink Upgrade Added');jQuery('#drinkUpgradeModalLink').addClass('d-none');jQuery('#drinkUpgradeAddedText').removeClass('d-none');jQuery('#drinkUpgradeModal').modal('hide');}function decodeHTMLEntities(text){var textArea=document.createElement('textarea');textArea.innerHTML=text;return textArea.value;}\n'use strict';jQuery(document).ready(function(){var $=jQuery;var boxSizeBtns=$(\".box-size-btns button\");var miniSnackBox=$('#crateSize4Snack');var ogSnackBox=$('#crateSize8Snack');var famSnackBox=$('#crateSize16Snack');var snackQtyMini=$('#snackQty4Snack');var snackQtyOg=$('#snackQty8Snack');var snackQtyFam=$('#snackQty16Snack');$(\"#addDrink\").attr('disabled','disabled');$(\"#addDrink\").prop(\"checked\",false);console.log('stock spot');if($(\"#itemQuantity\").is(\"[data-stock]\")){populateSelector($(\"#itemQuantity\").data(\"stock\"),$(\"#itemQuantity\"));}$(boxSizeBtns).on('click',function(e){$(\".country-price\").hide();$(\".box-size-btns button\").removeClass(\"btn-active\");var sizeSelected=e.currentTarget.dataset.box;$(\"#\"+sizeSelected+\"_prices\").show();e.currentTarget.classList.add(\"btn-active\");$(\"#addToCart\").removeAttr('disabled');if(e.currentTarget.dataset.drinkstock>0||e.currentTarget.dataset.preorder>0){$(\"#addDrink\").removeAttr('disabled');$(\".add-drink\").removeClass('d-none').addClass('d-flex');}else{$(\"#addDrink\").attr('disabled','disabled');$(\".add-drink\").removeClass('d-flex').addClass('d-none');}$(\"#crate_type\").val($(this).data(\"box\"));populateSelector(e.currentTarget.dataset.stock,e.currentTarget);if($(ogSnackBox).hasClass('btn-active')){$(\"#freeShippingIcon\").removeClass('opacity-0').addClass('opacity-1');$(snackQtyMini).addClass('d-none');$(snackQtyOg).removeClass('d-none');$(snackQtyFam).addClass('d-none');}else if($(famSnackBox).hasClass('btn-active')){$(\"#freeShippingIcon\").removeClass('opacity-0').addClass('opacity-1');$(snackQtyMini).addClass('d-none');$(snackQtyOg).addClass('d-none');$(snackQtyFam).removeClass('d-none');}else if($(miniSnackBox).hasClass('btn-active')){$(\"#freeShippingIcon\").removeClass('opacity-1').addClass('opacity-0');$(snackQtyMini).removeClass('d-none');$(snackQtyOg).addClass('d-none');$(snackQtyFam).addClass('d-none');}});$(\"#addDrink\").on('change',function(element){var drinkAddonValue=element.currentTarget.checked?1:0;var priceDiffMultiplier=drinkAddonValue?1:-1;var drinkPrice=parseFloat($(\"#drink_price\").val());$(\"#drink_addon\").val(drinkAddonValue);$(\".country-price\").each(function(i,e){var oldPrice=parseFloat($(e).text().replace('$',''));var newPrice=parseFloat(oldPrice+drinkPrice*priceDiffMultiplier).toFixed(2);$(e).text('$'+newPrice);});if($(element.target).is(\":checked\")&&!$(miniSnackBox).hasClass('btn-active')){$(\"#freeShippingIcon\").removeClass('opacity-0').addClass('opacity-1');}});});function populateSelector(maxStock,element){if($(element).is(\"[data-preorder]\")){return false;}maxStock=Math.min(10,maxStock);$(\"#itemQuantity\").empty();if(maxStock<=0){console.log(maxStock);$(\"#addToCart\").attr(\"disabled\",\"disabled\").text(\"Out of Stock\");$(\"#itemQuantity\").parent().hide();}else{$(\"#itemQuantity\").parent().show();$(\"#addToCart\").removeAttr(\"disabled\").text(\"Add to Cart\");var optionHtml='';for(var i=1;i<=maxStock;i++){optionHtml+='<option value=\"'+i+'\">'+i+'</option>';}$(\"#itemQuantity\").html(optionHtml);}}\n'use strict';jQuery(document).ready(function(){if(document.body.dataset.namespace=='fulfillment'){jQuery(\"#addBox\").on('click',function(){var lastBox=jQuery(\".box-block\").last();var boxCount=parseInt(jQuery(\".box-block\").last().data(\"blockcount\"))+1;var newBox=jQuery(\".box-block\").last().clone();jQuery(newBox).data(\"blockcount\",boxCount);jQuery(newBox).find(\".size-select\").last().attr(\"name\",\"boxsize[\"+boxCount+\"]\");jQuery(newBox).find(\".lb-select\").last().attr(\"name\",\"weight_lb[\"+boxCount+\"]\").val(0);jQuery(newBox).find(\".oz-select\").last().attr(\"name\",\"weight_oz[\"+boxCount+\"]\").val(0);jQuery(newBox).find(\".remove-box\").last().data('block',boxCount).addClass('d-block').removeClass('d-none');jQuery(lastBox).after(newBox);});jQuery(\"body\").on('click','.remove-box',function(elem){jQuery(elem.currentTarget).closest(\".box-block\").remove();});/**\n         * BEGIN\n         * Fulfillment Item picker steps\n         */jQuery(\".fulfillment-item-row\").on('click',function(event){if(!jQuery(this).hasClass(\"bg-success\")){var itemQty=parseInt(jQuery(this).find('[data-qty]').data('qty'));var confirmation=true;if(itemQty>1){confirmation=window.confirm(\"Please confirm that you have taken \"+itemQty+\" of this item.\");}if(confirmation){jQuery(this).addClass(\"bg-success text-white\").removeClass(\"bg-gray-light\");}}else{jQuery(this).removeClass(\"bg-success text-white\");if(jQuery(this).hasClass('odd')){jQuery(this).addClass(\"bg-gray-light\");}}if(jQuery(\".fulfillment-item-row\").length==jQuery(\".fulfillment-item-row.bg-success\").length){jQuery(\"#print_label\").removeAttr('disabled');}else{jQuery(\"#print_label\").attr('disabled','disabled');}});}});function nextOrder(setFulfilled){var orderIds=jQuery(\"input[name='ids']\").val();var postData={ids:orderIds,setFulfilled:setFulfilled,action:'next_order_fulfillment'};submitAjaxForm(\"/wp-admin/admin-ajax.php\",postData,'');}\n'use strict';jQuery(document).ready(function(){var $=jQuery;if($(window).width()>=768){$('#holidayLandingVid').html('<video class=\"position-absolute rounded\" preload=\"auto\" playsinline autoplay muted loop>\\n            <source src=\"/wp-content/uploads/2022/11/HolidayMastHead_CandyBar_1280x720-center-min.mp4\" type=\"video/mp4\">\\n        </video>');};});\n'use strict';jQuery(document).ready(function(){var $=jQuery;if($(window).width()>=768){$('#holidayHomeVid').html('<video class=\"position-absolute country-loop\" preload=\"auto\" playsinline autoplay muted loop>\\n            <source src=\"/wp-content/uploads/2022/11/HolidayMastHead_CandyBar_1280x720_v6.mp4\" type=\"video/mp4\">\\n        </video>');};});\n'use strict';jQuery(document).ready(function(){jQuery('#signIn input[type=\"checkbox\"]').on('change',function(){jQuery(this).prev().toggleClass('fa-eye').toggleClass('fa-eye-slash');var inputType=jQuery('#signIn #password').prop('type')==='password'?'text':'password';jQuery('#signIn #password').prop('type',inputType);});});\n'use strict';jQuery(document).ready(function(){var $=jQuery;$('.countries-menu-mobile li.geography > a').on('click',function(event){$(this).parent().parent().css('transform','translate3d(-100vw, 0px, 0px)');$(this).parent().children('ul.sub-menu-mobile').addClass('show-menu');return false;});$('.menu-back').on('click',function(event){$(this).parent().parent().parent().css('transform','translate3d(0%, 0px, 0px)');$(this).parent().parent().children('ul.sub-menu-mobile').removeClass('show-menu');return false;});// add background overlay when mobile nav is open\n$('.navbar-toggler').unbind(\"click\");$('.navbar-toggler').click(function(e){$('.site-content').css('transition','none');$('.site-content').css('padding-top','34px');$('body').addClass('noscroll');$('#header').css('z-index','unset');$('#header').css('margin-top','-34px');$('#header').removeClass('fixed-top');$('#header').addClass('position-relative');$('#secondary-header').css('z-index','unset');$('body').append('<div class=\"overlay fixed-top fixed-bottom\"></div>');});// remove background overlay when mobile nav is closed\n$('#collapse-close').on('click',function(){$('.site-content').css('padding-top','131px');$('body').removeClass('noscroll');$('#header').css('z-index',1050);$('#header').css('margin-top','unset');$('#header').removeClass('position-relative');$('#header').addClass('fixed-top');$('#secondary-header').css('z-index',1050);$('.overlay').remove();setTimeout(function(){$('.site-content').css('transition','all .3s ease');},100);});// close mobile nav when user clicks login and signinModal is open\n$('#signInTrigger').on('click',function(){$('.site-content').css('padding-top','131px');$('body').removeClass('noscroll');$('#navbarToggler').removeClass('show');$('#navbarToggler').removeClass('collapse');$('#navbarToggler').addClass('collapsing');$('#navbarToggler').removeClass('collapsing');$('#navbarToggler').addClass('collapse');$('#header').css('margin-top','unset');$('#header').removeClass('position-relative');$('#header').addClass('fixed-top');$('.overlay').remove();});// change header z-index when modal is shown so it appears behind modal backdrop\nvar modalArray=['#viewSpecsModal','#editShippingAddressModal-0','#editPaymentModal-0','#snackRatingModal','#signinModal','#snackPollModal','#unboxVidModal','#drinkUpgradeModal'];modalArray.forEach(function(modal){$(modal).on('show.bs.modal',function(){$('#header').css('z-index','unset');$('#secondary-header').css('z-index','unset');});$(modal).on('hidden.bs.modal',function(){$('#header').css('z-index',1050);$('#secondary-header').css('z-index',1050);});});// remove overlay if user increases browser width > 992px, add overlay if user descreases browser width < 992px while navbar-collapse is shown\nvar resizeTimer;$(window).on('resize',function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){if($(window).width()>992){$('.overlay').remove();}else if($(window).width()<992&&$('.navbar-collapse').hasClass('show')&&$('.overlay').length<1){$('body').append('<div class=\"overlay fixed-top fixed-bottom\"></div>');}},100);});// hide nav on scroll down, show nav on scroll up\nvar headerElem=$('#header');var headerElemHeight=headerElem.outerHeight();var secHeaderHeight=$('#secondary-header').outerHeight();var countriesMenuDialog=$('#countriesMenuModalDialog');// set top of countries-menu = to header + secondary-header height\n$(countriesMenuDialog).css('top','calc('+secHeaderHeight+'px + '+headerElemHeight+'px)');if($(document).scrollTop()<=0){$(headerElem).css('top',secHeaderHeight+'px');$(countriesMenuDialog).css('top','calc('+secHeaderHeight+'px + '+headerElemHeight+'px)');$('#content').css('padding-top',headerElemHeight+'px');}else{$(headerElem).css('top','0');$(countriesMenuDialog).css('top',headerElemHeight+'px');$('#content').css('padding-top',headerElemHeight-secHeaderHeight+'px');}$(window).on('scroll',function(){var headerElemHeight=headerElem.outerHeight();var secHeaderHeight=$('#secondary-header').outerHeight();// secondary-header only visible at top of page, adjust countries-menu top if user tries to open on scroll up before top of page\nif($(document).scrollTop()<=0){$(headerElem).css('top',secHeaderHeight+'px');$(countriesMenuDialog).css('top','calc('+secHeaderHeight+'px + '+headerElemHeight+'px)');$('#content').css('padding-top',headerElemHeight+'px');}else{$(headerElem).css('top','0');$(countriesMenuDialog).css('top',headerElemHeight+'px');$('#content').css('padding-top',headerElemHeight-secHeaderHeight+'px');}// Catch false equivelance glitch\nif(this.oldScroll===this.scrollY){return null;}else if(this.oldScroll>=this.scrollY||this.scrollY<0){$(headerElem).removeClass('hide');}else if(this.scrollY>=headerElemHeight){$(headerElem).addClass('hide');}this.oldScroll=this.scrollY;});$(window).on('resize',function(){var headerElemHeight=headerElem.outerHeight();var secHeaderHeight=$('#secondary-header').outerHeight();// set top of header = to secondary-header-height on resize\n$(headerElem).css('top',secHeaderHeight+'px');$('#content').css('padding-top',headerElemHeight+'px');// set top of countries-menu = to header + secondary-header height\nif($(document).scrollTop()==0){$(countriesMenuDialog).css('top','calc('+secHeaderHeight+'px + '+headerElemHeight+'px)');}else{$(countriesMenuDialog).css('top',headerElemHeight+'px');}});});\n'use strict';document.addEventListener('DOMContentLoaded',function(){jQuery('[type=\"search\"]').on('keyup',function(e){if(e.originalEvent.which==13){runSearch(e.currentTarget.value);}});jQuery(\"#searchSubmit\").on('click',function(e){e.preventDefault();runSearch(jQuery('[type=\"search\"]').val());});});function runSearch(str){window.location.href='/shop-all?search='+str;}\n'use strict';var currentUrl=new URL(window.location.href);var baseUrl=currentUrl.origin+currentUrl.pathname;var urlParams=new URLSearchParams(currentUrl.search);document.addEventListener('DOMContentLoaded',function(){if(document.body.dataset.namespace=='shop-all'){var filters={};var filterMsg=document.getElementById(\"filterMsg\");var snacks=document.getElementsByClassName(\"taxItem\");if(urlParams.has('c')){var countrySlug=urlParams.get('c');if(document.getElementById(countrySlug+\"_countries_filter\")){filters['countries']=countrySlug;updateFilters(filters,'countries',snacks);document.getElementById(countrySlug+\"_countries_filter\").checked=true;jQuery('#countriesRemoveFilter').prop('disabled',false);}else{updateHistoryState('countries','remove');}// show filterMsg on load if filters are applied\nif(jQuery('.taxItem:visible').length==0){filterMsg.style.display=\"block\";}else{filterMsg.style.display=\"none\";}}if(urlParams.has('t')){var typeSlug=urlParams.get('t');if(document.getElementById(typeSlug+\"_snack_types_filter\")){filters['snack_types']=typeSlug;updateFilters(filters,'snack_types',snacks);document.getElementById(typeSlug+\"_snack_types_filter\").checked=true;jQuery('#snack_typesRemoveFilter').prop('disabled',false);}else{updateHistoryState('snack_types','remove');}// show filterMsg on load if filters are applied\nif(jQuery('.taxItem:visible').length==0){filterMsg.style.display=\"block\";}else{filterMsg.style.display=\"none\";}}document.body.addEventListener('change',function(e){var target=e.target;if(target.getAttribute(\"name\").includes(\"_filter\")){var filterTarget=target.id.split(\"_\")[0];var filterType=target.name.replace(\"_filter\",\"\");filters[filterType]=filterTarget;if(filterType=='snack_types'&&urlParams.has('search')){window.location.href=window.location.href.split('?')[0]+\"?t=\"+filterTarget;jQuery('#'+filterType+'RemoveFilter').prop('disabled',false);}else{updateFilters(filters,filterType,snacks);jQuery('#'+filterType+'RemoveFilter').prop('disabled',false);}updateHistoryState(filterType,\"add\",filterTarget);}// show filterMsg if no snacks visible\nif(jQuery('.taxItem:visible').length==0){filterMsg.style.display=\"block\";}else{filterMsg.style.display=\"none\";}});document.body.addEventListener('removeFilter',function(e){var type=e.detail.dataset.taxonomy;delete filters[type];var target=null;var filterType=null;if(Object.keys(filters).length>0){if(type=='snack_types'){target=document.querySelector('input[name=\"countries_filter\"]:checked');filterType='countries';}else{target=document.querySelector('input[name=\"snack_types_filter\"]:checked');filterType='snack_types';}}updateFilters(filters,filterType,snacks);filterMsg.style.display=\"none\";});}});// querySelector returns the first element it finds with the correct selector\n// so it needs a unique class name or you're only grabbing one element\njQuery(document).ready(function(){if(document.body.dataset.namespace=='shop-all'){document.querySelector('#filterBtn').addEventListener('click',function(e){// from https://www.jamestease.co.uk/blether/add-remove-or-toggle-classes-using-vanilla-javascript\n// querySelectorAll returns a nodeList, so map to to an array and BOOM\n// if there's only one element to toggle, you can skip the array\n// and grab it with a simple querySelector\n[].map.call(document.querySelectorAll('.filter-wrap'),function(el){// classList supports 'contains', 'add', 'remove', and 'toggle'\nel.classList.toggle('toggled');});});}});document.addEventListener(\"DOMContentLoaded\",function(){if(document.body.dataset.namespace=='shop-all'){var i;(function(){// Gradient & Filter for Shop All\njQuery(\".taxonomy_container .term_container:nth-child(6)\").addClass(\"linGradient\");jQuery(\".taxonomy_container .term_container:nth-child(n+7)\").addClass(\"d-none\");var seeMoreCat=document.getElementsByClassName('seeMoreCat');var seeMoreIcon=document.getElementsByClassName('seeMoreIcon');var seeMoreCatText=document.getElementsByClassName('seeMoreCatText');var linGradient=document.querySelectorAll('.taxonomy_container .term_container:nth-child(6)');var searchDiv=document.querySelectorAll('#search-filter div');var showContent=false;for(i=0;i<seeMoreCat.length;i++){(function(index){seeMoreCat[index].addEventListener(\"click\",function(e){var target=e.currentTarget;var parent=target.parentElement.id;var linGradientItem=document.querySelectorAll('#'+parent+'.taxonomy_container .term_container:nth-child(n+7)');showContent=!showContent;if(showContent===true){seeMoreCat[index].classList.add('active');seeMoreCatText[index].innerHTML=\"Show Less\";linGradient[index].classList.remove('linGradient');linGradientItem.forEach(function(el){return el.classList.remove('d-none');});seeMoreIcon[index].classList.add('fa-minus');seeMoreIcon[index].classList.remove('fa-plus');}else{seeMoreCat[index].classList.remove('active');seeMoreCatText[index].innerHTML=\"Show More\";linGradient[index].classList.add('linGradient');linGradientItem.forEach(function(el){return el.classList.add('d-none');});seeMoreIcon[index].classList.remove('fa-minus');seeMoreIcon[index].classList.add('fa-plus');}});})(i);}})();}});// Equal Heights\n(function(){equalHeight(false);})();window.onresize=function(){equalHeight(true);};function toTitleCase(str){return str.replace(/\\w\\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase();});}function updateFilters(filters,filterType,snacks){var filtersArr=Object.values(filters);if(filterType===null){document.getElementById(\"filter-display\").innerHTML='';}else{if('snack_types'in filters&&'countries'in filters){document.getElementById(\"filter-display\").innerHTML=toTitleCase(filters['snack_types'].replace('-',' '))+' &#x2192; '+toTitleCase(filters['countries'].replace('-',' '));}else{document.getElementById(\"filter-display\").innerHTML=toTitleCase(filtersArr[0].replace('-',' '));}}for(var i=0;i<snacks.length;i++){var taxonomies=[snacks[i].dataset.type,JSON.parse(snacks[i].dataset.countries)].flat();var intersection=taxonomies.filter(function(x){return filtersArr.includes(x);});if(filtersArr.length<=intersection.length){snacks[i].style.display=\"block\";}else{snacks[i].style.display=\"none\";}}}function equalHeight(resize){var elements=document.getElementsByClassName(\"equalHeight\"),allHeights=[],i=0;if(resize===true){for(i=0;i<elements.length;i++){elements[i].style.height='auto';}}for(i=0;i<elements.length;i++){var elementHeight=elements[i].clientHeight;allHeights.push(elementHeight);}for(i=0;i<elements.length;i++){elements[i].style.height=Math.max.apply(Math,allHeights)+'px';// Optional: Add show class to prevent FOUC\nif(resize===false){elements[i].className=elements[i].className+\" show\";}}}function updateHistoryState(taxonomy){var action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"remove\";var term=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;switch(taxonomy){case'snack_types':if(action==\"remove\"&&urlParams.has('t')){urlParams.delete('t');}else if(action=\"add\"){urlParams.delete('t');urlParams.append('t',term);}break;case'countries':if(action==\"remove\"&&urlParams.has('c')){urlParams.delete('c');}else if(action=\"add\"){urlParams.delete('c');urlParams.append('c',term);}break;}var newUrl=baseUrl+\"?\"+urlParams.toString();newUrl=newUrl.replace(/\\?\\s*$/,\"\");// remove trailing ?\nwindow.history.replaceState({},document.title,newUrl);}function removeFilter(term){if(document.querySelectorAll(\"input[name='\"+term.dataset.taxonomy+\"_filter']:checked\").length){document.querySelectorAll(\"input[name='\"+term.dataset.taxonomy+\"_filter']:checked\")[0].checked=false;}updateHistoryState(term.dataset.taxonomy,'remove');var event=new CustomEvent(\"removeFilter\",{detail:term});document.body.dispatchEvent(event);jQuery('#'+term.dataset.taxonomy+'RemoveFilter').prop('disabled',true);}\n'use strict';var actionUrl=\"/wp-admin/admin-ajax.php\";$(document).ready(function(){// stop videos from playing when modal is closed, sets header z-index back to default\n$('.modal.fade').on('hidden.bs.modal',function(e){$('#unboxVidModal iframe').attr('src',$('#unboxVidModal iframe').attr('src'));});// change plus icon to minus when #readMoreAccordion is open\n$('#readMoreAccordionBtn').on('click',function(e){if(!$('#readMoreCollapse').hasClass('show')){$('#readMoreAccordionBtn').html('Read less <span class=\"h9 h7-xl ml-1 align-middle\"><i class=\"fas fa-minus\"></i></span>');}else{$('#readMoreAccordionBtn').html('Read more <span class=\"h9 h7-xl ml-1 align-middle\"><i class=\"fas fa-plus\"></i></span>');}});// change plus icon to minus when .size-accordions are open\n$('.size-btn').on('click',function(e){var size=e.currentTarget.dataset.size;if(!$('#'+size+'Collapse').hasClass('show')){$('#'+size+'AccordionBtn span').html(\"<i class='fas fa-minus'></i>\");}else{$('#'+size+'AccordionBtn span').html(\"<i class='fas fa-plus'></i>\");}});// recipe video\n$('#openRecipeVid').on('click',function(e){$('#thumbnail').addClass('open');$('#embedVid').addClass('open');});$('#closeRecipeVid').on('click',function(e){$('#embedVid iframe').attr('src',$('#embedVid iframe').attr('src'));$('#embedVid').removeClass('open');$('#thumbnail').removeClass('open');});// recipe accordion\n$('#viewFullRecipeBtn').on('click',function(e){$('#viewFullRecipeBtn').addClass('d-none');$('#viewLessRecipeBtn').removeClass('d-none');});$('#viewLessRecipeBtn').on('click',function(e){$('#viewFullRecipeBtn').removeClass('d-none');$('#viewLessRecipeBtn').addClass('d-none');});// trivia questions\nvar answers=$('form .single-answer');$(answers).on('click',function(e){var answer=e.currentTarget;var questionForm=$(answer).closest(\"form.ajax_form\");$(questionForm).find(\"input[name='answer']\").val(answer.dataset.answer);$(questionForm).submit();if(!$(answer).hasClass('correct')){// show answer is incorrect\n$(answer).addClass('incorrect-answer text-white');$(answer).children('.user-percentage').addClass('incorrect-answer d-block').removeClass('d-none');;// show correct answer\n$(answer).siblings('.correct').addClass('correct-answer');$(answer).siblings('.correct').children('.user-percentage').addClass('correct-answer d-block').removeClass('d-none');}else{$(answer).addClass('correct-answer');$(answer).children('.user-percentage').addClass('correct-answer d-block').removeClass('d-none');}// show user-percentage for all answers\n$(answer).siblings().children('.user-percentage').addClass('d-block').removeClass('d-none');// disable all answer buttons\n$(answer).siblings().prop('disabled',true);$(answer).prop('disabled',true);});// snack poll\nvar snackPollTriggers=$('.poll-modal-trigger');$(snackPollTriggers).on('click',function(e){var type;if($(e.currentTarget).hasClass('best-btn')){$('#snackPollCategory').text('Best');type='best';}else if($(e.currentTarget).hasClass('worst-btn')){$('#snackPollCategory').text('Worst');type='worst';}else if($(e.currentTarget).hasClass('weird-btn')){$('#snackPollCategory').text('Weirdest');type='weird';}$('#snackSuperlativeForm input[name=\"type\"]').val(type);$('#snackSuperlativeForm button.single-snack').unbind('click');$('#snackSuperlativeForm button.single-snack').on('click',function(btn){$('#snackSuperlativeForm input[name=\"snack_id\"]').val(btn.currentTarget.dataset.snackid);$('#snackSuperlativeForm').submit();equalHeight(true);});});initializeStarReviews();document.body.addEventListener('containerLoaded',function(e){initializeStarReviews();});var urlParams=new URLSearchParams(window.location.search);if(urlParams.has('ref')&&urlParams.get('ref')=='qr'){$('#signinModal').modal('show');}// add drink upgrade\n$('#addDrinkUpgrade').on('click',function(e){$('#addDrinkUpgrade').attr('disabled',true);$('#addDrinkUpgrade').text('');$('#addDrinkUpgrade').html('<div class=\"spinner-border text-light\" role=\"status\">\\n            <span class=\"sr-only\">Loading...</span>\\n        </div>');var postData={action:'add_drink',subscription_id:$(\"input[name='drinkless_subscription_id']\").val(),old_plan:$(\"input[name='drinkless_subscription_plan']\").val(),currency_code:$(\"input[name='user_currency_code']\").val(),external_id:$(\"input[name='drinkless_subscription_stripe_id']\").val()};var originalText='Add Drink Upgrade';submitAjaxForm(actionUrl,postData,originalText,e.currentTarget);});});function initializeStarReviews(){// review star btns\nvar starBtns=$('.review-stars .star-btn');var rating=0;$(starBtns).unbind('click');$(starBtns).on('click',function(e){var star=e.currentTarget;var parent=star.parentNode;parent.style.opacity=0.2;// The equivalent of parent.children.indexOf(child)\nrating=Array.prototype.indexOf.call(parent.children,star)+1;$(star).parent().children().each(function(idx,elem){if(idx<rating){$(elem).addClass('full').removeClass('empty');}else{$(elem).removeClass('full').addClass('empty');}});var postData={\"rating\":rating,\"snack_id\":parent.dataset.snackid,\"action\":'add-rating'};submitAjaxForm(\"/wp-admin/admin-ajax.php\",postData,null,null);parent.style.opacity=1;});}","const loadingGif = `<div class=\"loading d-flex align-items-center justify-content-center mx-auto\">    \n<img style=\"max-width: 125px;\" src=\"/wp-content/themes/wp-bootstrap-starter-child/loading.gif\">\n</div>`;\nconst ajaxUrl = '/wp-admin/admin-ajax.php';\n\njQuery(document).ready(function(){\n    const containers = jQuery(\"[data-ajaxcontainer]\");\n    const clickables = jQuery(\"[data-ajaxclickparent]\");\n    const lazyloaders = jQuery(\"[data-lazyload='1']\");\n\n    jQuery(containers).each(function(index, container){\n        var params;\n        if( container.dataset.ajaxparams == '' )\n        {\n            params = {\n                'action': container.dataset.ajaxcontainer\n            };\n        }\n        else\n        {\n            params = {\n                'action': container.dataset.ajaxcontainer,\n                'params': JSON.parse(container.dataset.ajaxparams)\n            };\n        }\n\n        let buttonLoad = 'buttonlazyload' in container.dataset;\n        if( 'lazyload' in container.dataset )\n        {\n            initializeLazyLoader(container, container.dataset.ajaxcontainer, buttonLoad);\n        }\n        \n        sendLoadRequest( container, params );\n    });\n\n    jQuery(clickables).each(function(index, parent){\n        jQuery(parent).on('click', function(){\n            var params;\n            let id = jQuery(this).data('ajaxclickparent');\n\n            if( !document.getElementById( id ) )\n            {\n                return false;\n            }\n\n            const container = document.getElementById( id );\n            \n            let buttonLoad = 'buttonlazyload' in container.dataset;\n\n            if( 'lazyload' in container.dataset )\n            {\n                initializeLazyLoader(container, container.dataset.ajaxclickcontainer, buttonLoad);\n            }\n\n            if(!jQuery(container).hasClass('nodata'))\n            {\n                if( typeof container.dataset.ajaxheader != 'undefined')\n                {\n                    document.getElementById(container.dataset.ajaxheader).style.display = 'block';\n                }\n\n                if( container.innerHTML.trim() == '' )\n                {\n                    if( container.dataset.ajaxparams == '' )\n                    {\n                        params = {\n                            'action': container.dataset.ajaxclickcontainer\n                        };\n                    }\n                    else\n                    {\n                        params = {\n                            'action': container.dataset.ajaxclickcontainer,\n                            'params': JSON.parse(container.dataset.ajaxparams)\n                        };\n                    }\n                \n                    sendLoadRequest( container, params );\n                }\n            }\n            else if( typeof container.dataset.ajaxheader != 'undefined')\n            {\n                document.getElementById(container.dataset.ajaxheader).style.display = 'none';\n            }\n            \n            // hide load more btn when accordion is collapsed\n            if ( jQuery(container).hasClass('show') ) {\n                jQuery(container).next().removeClass('d-flex').addClass('d-none');\n            } else {\n                jQuery(container).next().removeClass('d-none').addClass('d-flex');\n            }\n        });\n    });\n});\n\nfunction initializeLazyLoader( container, action, buttonLoad = false )\n{\n    if(buttonLoad)\n    {\n        let btnId = \"loadMore_\" + action + \"_\" + container.id;\n        if(!document.getElementById(btnId))\n        {\n            jQuery(container).after(\"<div class='d-flex align-items-center justify-content-center px-3 pb-4'><button id='\"+btnId+\"' class='load-more-btn btn btn-sm btn-secondary text-white font-weight-semibold text-capitalize mb-4 w-100'>Load More</button></div>\");\n            jQuery(\"#\"+btnId).click(function(e){\n                jQuery(\"#\"+btnId).attr('disabled','disabled');\n                let currentCount = jQuery(container).children('[data-lazyelement]').length;\n                let params = {\n                    'count': currentCount,\n                    'action': action,\n                    'params': container.dataset.ajaxparams == '' ? null : JSON.parse(container.dataset.ajaxparams)\n                }\n\n                jQuery(container).addClass('lazyloading');\n                sendLazyLoadRequest( container, params );\n\n                e.stopPropagation();\n            });\n        }\n    }\n    else\n    {\n        jQuery(window).scroll(function(){\n            if(jQuery(container).hasClass('show') && !jQuery(container).hasClass('lazyloading') && !jQuery(container).hasClass('lazyloadingcomplete'))\n            {\n                let currentCount = jQuery(container).children('[data-lazyelement]').length;\n                let scrollPosition = jQuery(window).scrollTop() + jQuery(window).height();\n                let elementPosition = jQuery(container).offset().top + jQuery(container).height();\n    \n                if( scrollPosition > elementPosition )\n                {\n                    let params = {\n                        'count': currentCount,\n                        'action': action,\n                        'params': container.dataset.ajaxparams == '' ? null : JSON.parse(container.dataset.ajaxparams)\n                    }\n\n                    jQuery(container).addClass('lazyloading');\n                    sendLazyLoadRequest( container, params );\n                }\n            }\n        });\n    }\n}\n\nfunction sendLazyLoadRequest( container, params )\n{\n    container.innerHTML += loadingGif;\n\n    jQuery.ajax({\n        url: ajaxUrl,\n        type: \"POST\",\n        beforeSend: function(xhr){\n            xhr.setRequestHeader('csrf_token', jQuery('meta[name=\"csrf-token\"]').attr('content'));\n        },\n        data: params,\n        dataType: 'json',\n        success: function(response) {\n            container.innerHTML = container.innerHTML.replace(loadingGif, '');\n            container.innerHTML += response.data.content;\n\n            jQuery(container).removeClass('lazyloading');\n\n            let btnId = \"loadMore_\" + params.action + \"_\" + container.id;\n            jQuery(\"#\"+btnId).removeAttr('disabled');\n            if( response.data.content.trim() == '' )\n            {\n                jQuery(container).addClass('lazyloadingcomplete'); // nothing left to load\n                jQuery(\"#\"+btnId).hide();//.attr('disabled', 'disabled').attr('title', 'No more content to load.');\n            }\n        },\n        error: function(response) {\n            console.error('Error: ', response);\n        },\n    });\n}\n\nfunction sendLoadRequest( container, params )\n{\n    container.innerHTML = loadingGif;\n\n    jQuery.ajax({\n        url: ajaxUrl,\n        type: \"POST\",\n        beforeSend: function(xhr){\n            xhr.setRequestHeader('csrf_token', jQuery('meta[name=\"csrf-token\"]').attr('content'));\n        },\n        data: params,\n        dataType: 'json',\n        success: function(response) {\n            container.innerHTML = response.data.content;\n            container.style.height = 'auto';\n\n            if( typeof container.dataset.ajaxheader != 'undefined')\n            {\n                if(response.data.content.trim() == '' )\n                {\n                    document.getElementById(container.dataset.ajaxheader).style.display = 'none';\n                    jQuery(container).addClass(\"nodata\");\n                }\n                else\n                {\n                    document.getElementById(container.dataset.ajaxheader).style.display = 'block';\n                }\n            }\n            \n            let event = new CustomEvent(\"containerLoaded\", {detail: container.dataset});\n            document.body.dispatchEvent(event);\n        },\n        error: function(response) {\n            console.error('Error: ', response);\n        },\n    });\n}","const freeShippingMinimum = 35;\nconst shippingCost = 4.99;\njQuery(document).ready(function() {\n    var $ = jQuery;\n\n    if(document.body.dataset.namespace == 'shopping-cart')\n    {\n        if( sessionStorage.getItem(\"cart\") == null )\n        {\n            fixSession();\n        }\n\n        $(\".ajax_form\").on('submit', function(event){\n            if($(this).attr('id') == 'removeFromCart')\n            {\n                let snackId = $(this).find(\"input[name='snack_id']\").val();\n                $(\"#cartQty_\" + snackId).remove();\n            }\n        });\n\n        $(\".cartQty, .mobileCartQty\").on(\"change\", function(e){\n            let newQty = e.currentTarget.value;\n            let singlePrice = e.currentTarget.dataset.price;\n            let snackId = e.currentTarget.dataset.snackid;\n\n            if( parseInt(newQty) > parseInt(e.currentTarget.max) )\n            {\n                newQty = e.currentTarget.max;\n                jQuery(\"#mobileCartQty_\" + snackId).val(newQty);\n                jQuery(\"#cartQty_\" + snackId).val(newQty);\n            }\n\n            let oldTotalSnackPrice = parseFloat( $(\"#totalPrice_\" + snackId).text().replace(',','') ).toFixed(2);\n            let newTotalSnackPrice = parseFloat(newQty * singlePrice).toFixed(2);\n\n            $(\"#totalPrice_\" + snackId).text( newTotalSnackPrice );\n            $(\"#mobileTotalPrice_\" + snackId).text( newTotalSnackPrice );\n\n            let difference = oldTotalSnackPrice - newTotalSnackPrice;\n\n            let oldSubTotal = parseFloat( $(\"#subTotal\").text().replace(',','') ).toFixed(2);\n            let oldGrandTotal = parseFloat( $(\"#grandTotal\").text().replace(',','') ).toFixed(2);\n            \n            $(\"#subTotal\").text( ( oldSubTotal - difference ).toFixed(2) );\n            $(\"#grandTotal\").text( ( oldGrandTotal - difference ).toFixed(2) );\n            \n\n            if( oldSubTotal >= freeShippingMinimum && ( oldSubTotal - difference ) < freeShippingMinimum )\n            {\n                $(\"#grandTotal\").text( parseFloat( oldGrandTotal - difference + shippingCost ).toFixed(2) );\n                $(\"#shippingTotal\").text( '$' + shippingCost );\n            }\n            else if( oldSubTotal < freeShippingMinimum && ( oldSubTotal - difference ) >= freeShippingMinimum )\n            {\n                $(\"#grandTotal\").text( parseFloat( oldGrandTotal - difference - shippingCost ).toFixed(2) );\n                $(\"#shippingTotal\").text( 'FREE' );\n            }\n        \n\n            let cartItemsCount = 0;\n            $(\".cartQty\").each(function(i, e){\n                cartItemsCount += parseInt(e.value);\n            });\n            $(\"#cart-counter > p\").text(cartItemsCount);\n        \n            let newCart = {};\n\n            $(\".cartQty\").each(function(i, e){\n                switch (e.dataset.posttype)\n                {\n                    case 'collection':\n                    case 'country':\n                        newCart[e.dataset.snackid] = {};\n                        newCart[e.dataset.snackid][e.dataset.cratesize] = parseInt(e.value);\n                        break;\n                    default:\n                        newCart[e.dataset.snackid] = parseInt(e.value);\n                        break;\n                }\n            });\n        \n            sessionStorage.setItem( \"cart\", JSON.stringify( newCart ) );\n            \n            let actionUrl = \"/wp-admin/admin-ajax.php\";\n            let postData = {\n                'action': 'sc_update_cart',\n                'cart': JSON.stringify( newCart )\n            };\n\n            jQuery.ajax({\n                async: false,\n                url: actionUrl,\n                type: \"POST\",\n                beforeSend: function(xhr){\n                    xhr.setRequestHeader('csrf_token', jQuery('meta[name=\"csrf-token\"]').attr('content'));\n                },\n                data: postData,\n                dataType: 'json',\n                success: function(response) {\n                    console.log(response);\n                },\n                error: function(error) {\n\n                    Object.keys(error).forEach( function( index ){\n                        console.log(index, error[index]);\n                    });\n\n                    \n                }\n            });\n        \n        });\n        \n    }\n});\n\nfunction addToCart(snackId, quantity)\n{\n    let cartString = window.sessionStorage.getItem('cart');\n    let cart = JSON.parse(cartString);\n\n    if(cart == null)\n    {\n        cart = {};\n    }\n    \n    if(cart.hasOwnProperty(snackId))\n    {\n        cart[snackId].qty += parseInt(quantity);\n    }\n    else\n    {\n        cart[snackId] = {qty: parseInt(quantity)};\n    }\n\n    window.sessionStorage.setItem('cart', JSON.stringify(cart));\n}\n\nfunction getCart()\n{\n    let cartString = window.sessionStorage.getItem('cart');\n    let cart = JSON.parse(cartString);\n}\n\nfunction checkout()\n{\n\n}\n\nfunction fixSession()\n{\n    let newCart = {};\n    $(\".cartQty\").each(function(i, e){\n        switch (e.dataset.posttype)\n        {\n            case 'collection':\n            case 'country':\n                newCart[e.dataset.snackid] = {};\n                newCart[e.dataset.snackid][e.dataset.cratesize] = parseInt(e.value);\n                break;\n            default:\n                newCart[e.dataset.snackid] = parseInt(e.value);\n                break;\n        }\n    });\n\n    sessionStorage.setItem( \"cart\", JSON.stringify(newCart) );\n}","jQuery(document).ready(function() {\n    var $ = jQuery;\n\n    const email = $('#email');\n    const userFirst = $('#firstname');\n    const userLast = $('#lastname');\n    const userAddress1 = $('#address_1');\n    const userCity = $('#city');\n    const userZip = $('#zipcode');\n    const userPhone = $('#phone');\n    const errorText1 = $('.form-error-1');\n    const errorText2 = $('.form-error-2');\n    const errorText3 = $('.form-error-3');\n    const errorText4 = $('.form-error-4');\n    const emailErrorText = $('.email-exists-error');\n\n    // guestCheckoutForm validation\n    $(\".guest-checkout-form\").on('submit', function(e){\n\n        $(emailErrorText).addClass(\"d-none\");\n        e.preventDefault();\n        var submitBtn = $(\".guest-checkout-form\").find('[type=\"submit\"]').first();\n        var originalText = jQuery(submitBtn).text();\n\n        jQuery(submitBtn).attr('disabled', 'disabled');\n        jQuery(submitBtn).text('');\n        jQuery(submitBtn).html(`<div class=\"spinner-border text-light\" role=\"status\">\n        <span class=\"sr-only\">Loading...</span>\n      </div>`);\n        \n        let submitForm = true;\n        \n        // check if any inputs were left blank\n        if( userFirst.val().length === 0 || userLast.val().length === 0 || email.val().length === 0 || userAddress1.val().length === 0 || userCity.val().length === 0 || userZip.val().length === 0 || userPhone.val().length === 0) {\n            submitForm = false;\n            errorText1.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">One or more fields were left blank</p>');\n        } else {\n            errorText1.html('');\n        }\n\n        // check if userZip is at least 5 digits\n        function checkZipcode(zipcode) {\n            var regex = /^\\d{5}$/;\n            return regex.test(zipcode);\n        }\n\n        if(!checkZipcode(userZip.val())) {\n            submitForm = false;\n            errorText2.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Zipcode must be 5 digits</p>');\n        } else {\n            errorText2.html('');\n        }\n\n        // check if userPhone is at least 10 digits\n        function checkPhone(phoneNum) {\n            var regex = /^\\d{10}$/;\n            return regex.test(phoneNum);\n        }\n\n        if(!checkPhone(userPhone.val())) {\n            submitForm = false;\n            errorText4.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Phone number must be 10 digits</p>');\n        } else {\n            errorText4.html('');\n        }\n        \n        // check if email address is valid\n        function checkEmail(emailAddress) {\n            var regex = /^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,6})+$/;\n            return regex.test(emailAddress);\n        }\n\n        if(!checkEmail(email.val())) {\n            submitForm = false;\n            errorText3.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Please enter a valid email address</p>');\n        } else {\n            errorText3.html('');\n        }\n\n        if( submitForm )\n        {\n            $.ajax({\n                url: '/wp-admin/admin-ajax.php',\n                type: \"POST\",\n                async: false,\n                data: {\n                    email: email.val(),\n                    action: 'sc_check_guest_email'\n                },\n                dataType: 'json',\n                success: function(response) {\n                    console.log(e);\n                    if(response.data === true)\n                    {   \n                        emailErrorText.html('<p class=\"mb-2 mb-md-3 text-danger\">Oops! It looks like an account with that email already exists. Please <a class=\"text-danger text-decoration-underline\" href=\"https://account.snackcrate.com\" target=\"_blank\">Sign In</a> or try a different email address.</p>');\n                        $(emailErrorText).removeClass(\"d-none\");\n\n                        return false;\n                    }\n                    else\n                    {\n                        let postData = {};\n                        for(const field of $(\".guest-checkout-form\").serializeArray())\n                        {\n                            postData[field.name] = field.value;\n                        }\n                        submitAjaxForm('/wp-admin/admin-ajax.php', postData, originalText, submitBtn);\n                    }\n                },\n                error: function(error) {\n    \n                }\n            });\n        }\n        else\n        {\n            jQuery(this).find('[type=\"submit\"]').first().removeAttr('disabled');\n            jQuery(this).find('[type=\"submit\"]').first().html('');\n            jQuery(this).find('[type=\"submit\"]').first().text(originalText);\n        }\n    });\n});\n\nvar $ = jQuery;\nlet doAction;\n\nfunction validateCreditCardInputs (number, month, year, cvv, error1, error2, error3, error4) {\n    // check if any inputs were left blank\n    if( number.val().length === 0 || month.val().length === 0 || year.val().length === 0 || cvv.val().length === 0) {\n        doAction = false;\n        error1.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">One or more fields were left blank</p>');\n    } else {\n        error1.html('');\n        doAction = true;\n    }\n\n    // check if ccNumber is 13-16 digits\n    function checkCCNumber(ccNum) {\n        var regex = /^\\b\\d{13,16}\\b$/;\n        return regex.test(ccNum);\n    }\n\n    if(!checkCCNumber(number.val())) {\n        doAction = false;\n        error2.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Credit card number must be between 13 - 16 digits</p>');\n    } else {\n        error2.html('');\n        doAction = true;\n    }\n\n    // check if ccExpMonth and ccExpYear are 2 digits\n    function checkExpDate(ccDate) {\n        var regex = /^\\d{2}$/\n        return regex.test(ccDate);\n    }\n\n    if(!checkExpDate(month.val()) || !checkExpDate(year.val())) {\n        doAction = false;\n        error3.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Expiration month and year must each be 2 digits</p>');\n    } else {\n        error3.html('');\n        doAction = true;\n    }\n\n    // check if CVV are 3-4 digits\n    function checkCvv(ccCvv) {\n        var regex = /^\\b\\d{3,4}\\b$/;\n        return regex.test(ccCvv);\n    }\n\n    if(!checkCvv(cvv.val())) {\n        doAction = false;\n        error4.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">CVV must be 3 - 4 digits</p>');\n    } else {\n        error4.html('');\n        doAction = true;\n    }\n\n    return doAction;\n}\n\nfunction validateCreateAccountInputs (email, password, error1, error2, error3) {\n    // check if any inputs were left blank\n    if( email.val().length === 0 || password.val().length === 0 ) {\n        doAction = false;\n        error1.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">One or more fields were left blank</p>');\n    } else {\n        error1.html('');\n        doAction = true;\n    }\n\n    // check if email address is valid\n    function checkEmail(emailAddress) {\n        var regex = /^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,6})+$/;\n        return regex.test(emailAddress);\n    }\n\n    if(!checkEmail(email.val())) {\n        doAction = false;\n        error2.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Please enter a valid email address</p>');\n    } else {\n        error2.html('');\n        doAction = true;\n    }\n\n    // check if password is valid\n    function checkPassword(password) {\n        var regex = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/;\n        return regex.test(password);\n    }\n\n    if(!checkPassword(password.val())) {\n        doAction = false;\n        error3.html('<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">Passwords must be longer than eight characters and include at least one uppercase letter, one lowercase letter, and one number</p>');\n    } else {\n        error3.html('');\n        doAction = true;\n    }\n\n    return doAction;\n}","const actionUrl = \"/wp-admin/admin-ajax.php\";\nconst confirmPaymentText = \"Place Order\";\n\njQuery(document).ready(function() {\n    var $ = jQuery;\n\n    if(document.body.dataset.namespace == 'checkout-guest' || document.body.dataset.namespace == 'checkout-confirm-shipping')\n    {\n        $(\"#billing_same\").on( 'change', function() {\n\n            if( $(this).is(':checked') )\n            {\n                $(\"#billing_block\").addClass(\"d-none\");\n            }\n            else\n            {\n                $(\"#billing_block\").removeClass(\"d-none\");\n            }\n\n        });\n\n        $(\"[data-addressid]\").on('click', function(){\n            let selected_address = $(this).data('addressid');\n            if( selected_address != 0)\n            {\n                $(\"input[name='shipping_address']\").val(selected_address);\n                $(this).siblings().removeClass('selected');\n                $(\"[data-addressid=\"+selected_address+\"]\").addClass('selected');\n            } \n        });\n\n        const emailErrorText = $('.email-exists-error');\n        $(\"#email\").on('change', function(){\n            $.ajax({\n                url: actionUrl,\n                type: \"POST\",\n                data: {\n                    email: $(\"#email\").val(),\n                    action: 'sc_check_guest_email'\n                },\n                dataType: 'json',\n                success: function(response) {\n                    if(response.data === true)\n                    {   \n                        emailErrorText.html('<p class=\"mb-2 mb-md-3 text-danger\">Oops! It looks like an account with that email already exists. Please <a id=\"scrollToLogin\" class=\"text-danger text-decoration-underline\" href=\" #guestCheckoutSignin\">Sign In</a> or try a different email address.</p>');\n                        $(emailErrorText).removeClass(\"d-none\");\n\n                        $(\"#scrollToLogin\").on('click', function(evt){\n                            evt.preventDefault();\n\n                            if( $(\"#guestCheckoutSignin:visible\").length == 0)\n                            {\n                                $(\"#userAccount\").click();\n                            }\n                            else\n                            {\n                                $(\"#guestCheckoutSignin\").addClass(\"border border-danger\");\n                                $([document.documentElement, document.body]).animate({\n                                    scrollTop: $(\"#guestCheckoutSignin\").offset().top - 80\n                                }, 500);\n                            }\n                        });\n\n                        return false;\n                    }\n                    else\n                    {\n                        $(emailErrorText).addClass(\"d-none\");\n                    }\n                }\n            });\n        });\n    }\n    else if( document.body.dataset.namespace == 'checkout-confirm-pay' )\n    {\n        let style = {\n            base: {\n                fontSize: '16px',\n                color: \"#32325d\",\n            }\n        };\n\n        var stripe;\n        if (window.location.href.indexOf('local') !== -1 || window.location.href.indexOf('snackbar') !== -1 || window.location.href.indexOf('candybar-dev') !== -1) {\n            stripe = window.Stripe('pk_test_n3rrzyh2ClIZlnCntL9X8IRx');\n        }\n        else\n        {\n            stripe = window.Stripe('pk_live_3L8cvOKHqpOpDF3JXfZqZTd2');\n        }\n        \n        let elements = stripe.elements();\n\n        let card = elements.create('card', {\n            'hidePostalCode': true,\n            'style': style\n        });\n\n        card.mount('#card-element');\n\n        card.addEventListener('change', function(event) {\n            var displayError = document.getElementById('card-errors');\n            if (event.error) \n            {\n                displayError.textContent = event.error.message;\n            }\n            else \n            {\n                displayError.textContent = '';\n            }\n        });\n\n        if( $(\"[data-card]\").length > 0 )\n        {\n            $(\"[data-card]\").on('click', function(){\n                let selected_source = $(this).data('card');\n                \n                if(selected_source != 0)\n                {\n                    $(\"input[name='source']\").val(selected_source);\n                    $(this).siblings().removeClass('selected');\n                    $(\"[data-card=\"+selected_source+\"]\").addClass('selected');\n                }\n            });\n\n            $(\"#newCustomerCard\").on('submit', function(event){\n                event.preventDefault();\n                \n                let submitBtn = $(this).find('[type=\"submit\"]').first();\n                disableSubmit(submitBtn);\n\n                stripe.createToken(card)\n                    .then(function(result){\n                        if(result.error)\n                        {\n                            jQuery(submitBtn).removeAttr(\"disabled\").text(\"Save\");\n                            // Inform the customer that there was an error.\n                            var errorElement = document.getElementsByClassName('form-error')[0];\n                            errorElement.textContent = result.error.message;\n                            $('#signup-customer').removeClass('avoid-clicks');\n                        }\n                        else\n                        {\n                            let postData = {\n                                'name': $(\"#ccNameUpdate\").val(),\n                                'action': 'sc_update_payment_method',\n                                'token': result.token.id,\n                            };\n\n                            submitAjaxForm(actionUrl, postData, \"Save\", submitBtn);\n                        }\n                    });\n            });\n\n            $(\"#confirmPaymentForm\").on('submit', function(event){\n                event.preventDefault();\n\n                let submitBtn = $(this).find('[type=\"submit\"]').first();\n\n                let postData = {\n                    'action': 'sc_confirm_payment',\n                    'source': $(\"[name='source']\").val(),\n                };\n\n                disableSubmit(submitBtn);\n                \n                submitAjaxForm(actionUrl, postData, confirmPaymentText, submitBtn);\n            });\n        }\n        else\n        {\n            $(\"#confirmPaymentForm\").on('submit', function(event){\n                event.preventDefault();\n\n                let submitBtn = $(this).find('[type=\"submit\"]').first();\n                disableSubmit(submitBtn);\n\n                runStripe(stripe, card, submitBtn);\n            });\n        }\n    }\n});\n\n\nfunction runStripe(stripe, card, submitBtn) {\n    APev = false;\n    CCev = false;\n\n    stripe.createToken(card)\n        .then(function(result){\n            if(result.error)\n            {\n                jQuery(submitBtn).removeAttr(\"disabled\").text(confirmPaymentText);\n                // Inform the customer that there was an error.\n                var errorElement = document.getElementById('card-errors');\n                var loggedInError = document.querySelector('.loggedInCardErrors')\n                errorElement.textContent = result.error.message;\n                loggedInError.style.backgroundColor = '#DC3545'\n                loggedInError.textContent = result.error.message;\n\n                $('#signup-customer').removeClass('avoid-clicks');\n            }\n            else\n            {\n                document.querySelector('.placeOrderCheckout').textContent = \"Processing...\"\n                let postData = {\n                    'action': 'sc_confirm_payment',\n                    'payment_method': 'card',\n                    'token': result.token.id,\n                };\n                \n                submitAjaxForm(actionUrl, postData, confirmPaymentText, submitBtn);\n            }\n        });\n}","const email = $('#user_email');\nconst password = $('#user_password');\nconst ccNumber = $('#ccNumber');\nconst ccExpMonth = $('#ccExpMonth');\nconst ccExpYear = $('#ccExpYear');\nconst ccCvv = $('#ccCvv');\nconst errorText1 = $('.form-error-1');\nconst errorText2 = $('.form-error-2');\nconst errorText3 = $('.form-error-3');\nconst errorText4 = $('.form-error-4');\n\njQuery(window).load(function(){\n    jQuery(\"[type='submit']\").each(function(){\n        jQuery(this).css('pointer-events', 'auto').css('opacity', 1);\n    });\n\n    // take the select to change as a parameters\n    function updateSelect(select) {\n        // get the index of the selected option\n        const index = select.selectedIndex;\n        // check if the first option is selected (index 0)\n        if (index === 0) {\n        // if selected, add 'grey' class to change text color\n        select.classList.remove('text-dark');\n        } else {\n        // if not selected, remove 'grey' class\n        select.classList.add('text-dark');\n        }\n    }\n    \n    // Event listener fo the select 'change' event\n    function change(event) {\n        // get the changed select from the event object\n        const select = event.target;\n        // update this select\n        updateSelect(select);\n    }\n    \n    // find all the 'select' elements\n    const selects = document.querySelectorAll('select');\n    // for each select, add change event listener and update them\n    selects.forEach((select) => {\n        // add change listener\n        select.addEventListener('change', change);\n        // update select\n        updateSelect(select);\n    });\n\n    // adjust position of shipping-truck based on width of progress\n    if( $(window).width() < 992) {\n        if ( $('.progress').width() < $('.shipping-truck').width() - 15 ) {\n            $('.shipping-truck').css('left', '0');\n        } else {\n            $('.shipping-truck').css('left', 'calc(100% - 47px)');\n        }\n\n        if( $('.progress').width() < $('.progress-bar').width()) {\n            $('.progress-bar').css('width', '100%');\n        } else {\n            $('.progress-bar').css('width', 'calc(100% - 15px)');\n        }\n    } else {\n        if ( $('.progress').width() < $('.shipping-truck').width() - 22 ) {\n            $('.shipping-truck').css('left', '0');\n        } else {\n            $('.shipping-truck').css('left', 'calc(100% - 70px)');\n        }\n\n        if( $('.progress').width() < $('.progress-bar').width() ) {\n            $('.progress-bar').css('width', '100%');\n        } else {\n            $('.progress-bar').css('width', 'calc(100% - 22px)');\n        }\n    }\n});\n\njQuery(document).ready(function() {\n    var $ = jQuery;\n\n    $(function () {\n        $('[data-toggle=\"tooltip\"]').tooltip();\n    });\n\n    $(function () {\n        $('[data-toggle=\"popover\"]').popover({html:true})\n    })\n\n    // close predictive search window if a click outside of that element occurs\n    $(document).click(function(event) { \n        var $target = $(event.target);\n        if( !$target.closest('#predictive-search').length && $('#predictive-search').is(\":visible\") ) \n        {\n            $('#predictive-search').hide();\n        }        \n    });\n    $(\".appleid-signin\").on('click', function(e){\n        $(\"#appleid-signin\").click();\n    });\n\n    // add back-to-top button on every page after #primary section\n    $('#primary').after('<a style=\"z-index: 100;\" aria-label=\"click to scroll back to top\" id=\"back-to-top\" href=\"#\" class=\"btn btn-primary btn-lg-md back-to-top text-white shadow-sm\" role=\"button\"><i class=\"fas fa-chevron-up\"></i></a>');\n\n    // fade back-to-top btn in and out based on user scroll\n    $(window).scroll(function () {\n        if ($(this).scrollTop() > 50) {\n            $('#back-to-top').fadeIn();\n        } else {\n            $('#back-to-top').fadeOut();\n        }\n    });\n    // scroll body to 0px on click\n    $('#back-to-top').click(function () {\n        $('body,html').animate({\n            scrollTop: 0\n        }, 400);\n        return false;\n    });\n\n    initializeAjaxForms();\n\n    document.body.addEventListener('containerLoaded', function(e) {\n        initializeAjaxForms();\n    });\n});\n\nfunction initializeAjaxForms()\n{\n    $(\".ajax_form\").unbind('submit');\n    $(\".ajax_form\").on('submit', function(e){            \n        e.preventDefault();\n        let doAction = true;\n        let submitButton = jQuery(this).find('[type=\"submit\"]').first()\n        let originalText = jQuery(submitButton).text();\n\n\n        jQuery(this).find('[type=\"submit\"]').first().attr('disabled', 'disabled');\n        jQuery(this).find('[type=\"submit\"]').first().text('');\n        jQuery(this).find('[type=\"submit\"]').first().html(`<div class=\"spinner-border text-light\" role=\"status\">\n        <span class=\"sr-only\">Loading...</span>\n      </div>`);\n\n        // credit card input validation\n        if ( ccNumber.val() != undefined && ccExpMonth.val() != undefined && ccExpYear.val() != undefined && ccCvv.val() != undefined && $(this).attr('id') !== 'guestCheckout' ) {\n            doAction = validateCreditCardInputs(ccNumber, ccExpMonth, ccExpYear, ccCvv, errorText1, errorText2, errorText3, errorText4);\n        }\n\n        // create account input validation \n        if ( email.val() != undefined && password.val() != undefined && $(this).attr('id') !== 'guestCheckout' ) {\n            doAction = validateCreateAccountInputs(email, password, errorText1, errorText2, errorText3);\n        }\n\n        if ( doAction ) {\n            let actionUrl = $(this).attr('action');\n            $(\".form-error\").empty();\n            var postData = {};\n            for(const field of $(this).serializeArray())\n            {\n                postData[field.name] = field.value;\n            }\n    \n            submitAjaxForm(actionUrl, postData, originalText, submitButton);\n        }\n        else\n        {\n            jQuery(submitButton).removeAttr('disabled');\n            jQuery(submitButton).html('');\n            jQuery(submitButton).text(originalText)\n        }\n    });\n}\n\nfunction disableSubmit(submitBtn)\n{\n    jQuery(submitBtn).attr('disabled','disabled');\n    jQuery(submitBtn).html(`<div class=\"spinner-border text-light\" role=\"status\">\n        <span class=\"sr-only\">Loading...</span>\n        </div>`);\n}\n\nfunction submitAjaxForm(actionUrl, postData, originalText, submitButton)\n{\n    jQuery.ajax({\n        url: actionUrl,\n        type: \"POST\",\n        async: false,\n        beforeSend: function(xhr){\n            xhr.setRequestHeader('csrf_token', jQuery('meta[name=\"csrf-token\"]').attr('content'));\n        },\n        data: postData,\n        dataType: 'json',\n        success: function(response) {\n            console.log('Success: ', response);\n\n            if(typeof response.data === 'object' && 'callback' in response.data)\n            {\n                let args = new Array();\n                if('callbackArguments' in response.data)\n                {\n                    args = response.data.callbackArguments;\n                    // callbackArguments MUST be passed as an array from PHP. \n                    // And as an array of arrays if there are multiple variables needed.\n                }\n                runFunction(response.data.callback, args);\n            }\n            else\n            {\n                console.log('Nothing left to do.');\n            }\n            jQuery('.loading_wrapper').fadeOut();\n        },\n        error: function(response) {\n            console.error(response);\n            //jQuery(\".form-error\").html(`<p class=\"mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">${response.responseJSON.data}</p>`);\n\n            if( \n                typeof response.responseJSON.data === 'object' && \n                'show_message' in response.responseJSON.data && \n                'message' in response.responseJSON.data && \n                response.responseJSON.data.show_message === true\n            )\n            {\n                alert(response.responseJSON.data.message);\n                jQuery(submitButton).removeAttr('disabled');\n            }\n            else\n            {\n                jQuery(\".form-error\").html(`<p class=\"mw-100 text-center mb-2 mb-md-3 bg-danger font-weight-semibold rounded-sm text-white p-2\">An error occurred while processing your request.</p>`);\n                var errorElement = document.getElementById('card-errors');\n                var loggedInError = document.querySelector('.loggedInCardErrors')\n                errorElement.textContent = response.responseJSON.data;\n                loggedInError.style.backgroundColor = '#DC3545'\n                loggedInError.textContent = response.responseJSON.data;\n            }\n\n            if( document.getElementById(\"packError\"))\n            {\n                jQuery(\"#packError\").text(response.responseJSON.data);\n            }\n            \n            jQuery('.loading_wrapper').fadeOut();\n        },\n        complete: function() {\n            jQuery(submitButton).removeAttr('disabled');\n            jQuery(submitButton).html(originalText);\n        },\n    });\n}\n\nfunction runFunction(name, args)\n{\n    var fn = window[name];\n    if(typeof fn !== 'function')\n        return;\n\n    fn.apply(window, args);\n}\n\nfunction loginSuccess(args)\n{\n    if( args.redirect_link != '' )\n    {\n        straightRedirect(args);\n    }\n    else\n    {\n        window.location.reload();\n    }\n    \n}\n\nfunction updateCartCounter(quantity)\n{\n    if(document.getElementById(\"cart-counter\"))\n    {\n        let oldQty = document.getElementById(\"cart-counter\").textContent;\n        let newQty = parseInt(oldQty) + parseInt(quantity);\n        document.getElementById(\"cart-counter\").textContent = newQty;\n        if(newQty === 0)\n        {\n            jQuery(\"#cart-counter\").remove();\n        }\n    }\n    else\n    {\n        jQuery(\"#userCart\").append(\"<div id='cart-counter'>\"+quantity+\"</div>\");\n    }\n}\n\nfunction cartDirectUpdateSuccess(args)\n{\n    sessionStorage.setItem(\"cart\", args.cart);\n}\n\nfunction cartSuccess(args)\n{\n    updateCartCounter(args.quantity);\n\n    sessionStorage.setItem(\"cart\", args.cart);\n\n    jQuery('<form action=\"/added-to-cart\" method=\"POST\"/>')\n        .append(jQuery('<input type=\"hidden\" name=\"snack_id\">').val(args.snack_id))\n        .append(jQuery('<input type=\"hidden\" name=\"crate_size\">').val(args.crate_size))\n        .append(jQuery('<input type=\"hidden\" name=\"quantity\">').val(args.quantity))\n        .appendTo(jQuery(document.body))\n        .submit();\n}\n\nfunction cartRemovalSuccess(args)\n{\n    updateCartCounter(args.quantity * -1);\n\n    sessionStorage.setItem(\"cart\", args.cart);\n\n    window.location.reload();\n}\n\nfunction fulfillmentSuccess()\n{\n    window.location.reload();\n}\n\nfunction printLabelSuccess(args)\n{\n    let i = 0;\n    args.labels.forEach( function( label ){\n        i++;\n        window.open(label, '_blank');\n    } ); \n}\n\nfunction printedScanform(args)\n{\n    window.open(args.link, '_blank');\n    window.location.reload();\n}\n\nfunction invoiceGenerationSuccess(args)\n{\n    args.invoices.forEach( function( invoice ) {\n        window.open(invoice, '_blank');\n    } ); \n\n    window.location.reload();\n}\n\nfunction updateShippingSuccess(args)\n{\n    window.location.href = window.location.href.split('?')[0] + \"?selected_address=\" + args.id;\n}\n\nfunction updatePaymentSuccess(args)\n{\n    jQuery('.modal').modal('hide');\n    window.location.href = window.location.href.split('?')[0] + \"?p=\" + args.card_id;\n}\n\nfunction updateOrderShippingSuccess(args)\n{\n    jQuery( \"input[name='shipping_address']\" ).val( args.data );\n\n    let values = JSON.parse(args.data);\n    for( const index in values )\n    {\n        let value = values[index];\n        console.log(value, index);\n        console.log( jQuery( \"[data-shippingfield='\" + index + \"']\") )\n        jQuery( \"[data-shippingfield='\" + index + \"']\").text( value );\n\n        if( index === 'address_2' && value.length == 0 )\n        { \n            jQuery( \"[data-shippingfield='address_2']\" ).addClass(\"d-none\");\n        }\n        else if( index === 'address_2' && value.length > 0 )\n        {\n            jQuery( \"[data-shippingfield='address_2']\" ).removeClass(\"d-none\");\n        }\n    }\n\n    jQuery('.modal').modal('hide');\n}\n\nfunction checkoutUser(args)\n{\n    jQuery('<form action=\"'+ args.submit_link +'\" method=\"POST\"/>')\n        .append(jQuery('<input type=\"hidden\" name=\"email\">').val(args.email))\n        .append(jQuery('<input type=\"hidden\" name=\"first_name\">').val(args.first_name))\n        .append(jQuery('<input type=\"hidden\" name=\"last_name\">').val(args.last_name))\n        .append(jQuery('<input type=\"hidden\" name=\"user_address_1\">').val(args.user_address_1))\n        .append(jQuery('<input type=\"hidden\" name=\"user_address_2\">').val(args.user_address_2))\n        .append(jQuery('<input type=\"hidden\" name=\"user_city\">').val(args.user_city))\n        .append(jQuery('<input type=\"hidden\" name=\"user_state\">').val(args.user_state))\n        .append(jQuery('<input type=\"hidden\" name=\"user_zip\">').val(args.user_zip))\n        .append(jQuery('<input type=\"hidden\" name=\"user_country\">').val(args.user_country))\n        .appendTo(jQuery(document.body))\n        .submit();\n}\n\nfunction checkoutGuestSubmitted(args)\n{\n    jQuery('<form action=\"'+ args.submit_link +'\" method=\"POST\"/>')\n        .append(jQuery('<input type=\"hidden\" name=\"email\">').val(args.email))\n        .append(jQuery('<input type=\"hidden\" name=\"first_name\">').val(args.first_name))\n        .append(jQuery('<input type=\"hidden\" name=\"last_name\">').val(args.last_name))\n        .appendTo(jQuery(document.body))\n        .submit();\n}\n\nfunction checkoutConfirmPaymentGuest(args)\n{\n    jQuery('<form action=\"'+ args.submit_link +'\" method=\"POST\"/>')\n        .append(jQuery('<input type=\"hidden\" name=\"data\">').val(args.data))\n        .appendTo(jQuery(document.body))\n        .submit();\n}\n\nfunction straightRedirect(args)\n{\n    window.location.href = args.redirect_link;\n}\n\nfunction straightReload()\n{\n    window.location.reload();\n}\n\nfunction triviaAnswered(args)\n{\n    Object.values(args.percentages).forEach((percentage, idx) => {\n        let letter = Object.keys(args.percentages)[idx];\n        jQuery(\"#triviaQuestion\" + args.question_key).find(\"button[data-answer='\"+ letter +\"'] .user-percentage\").css(\"width\", percentage + \"%\");\n    });\n}\n\nfunction superlativeSaved(args)\n{\n    $('.' + args.type + '-picks').addClass('d-flex').removeClass('d-none');\n    $('.' + args.type + '-snack').addClass('d-none').removeClass('d-flex');\n\n    $('#snackPollModal').modal('hide');\n\n    $('[data-elementrole=\"' + args.type + '-user-image\"]').attr(\"alt\", \"image of \" + decodeHTMLEntities(args.user_pick.name) ).attr(\"src\", args.user_pick.image);\n    $('[data-elementrole=\"' + args.type + '-user-name\"]').text( decodeHTMLEntities(args.user_pick.name) );\n\n    $('[data-elementrole=\"' + args.type + '-popular-image\"]').attr(\"alt\", \"image of \" + decodeHTMLEntities(args.highest_rated.name) ).attr(\"src\", args.highest_rated.image);\n    $('[data-elementrole=\"' + args.type + '-popular-name\"]').text( decodeHTMLEntities(args.highest_rated.name) );\n\n    getStarsHTML( args.user_pick.rating, '.' + args.type + '-picks .your-pick .review-stars' );\n    getStarsHTML( args.highest_rated.rating, '.' + args.type + '-picks .popular-pick .review-stars' );\n}\n\nfunction getStarsHTML( rating, element )\n{\n    rating = (rating == '') ? 0 : rating;\n    $(element).html('');\n    var url;\n    var stars = '';\n    for( var i = 1; i <= 5; i++)\n    {\n        if( rating >= i )\n        {\n            url = global_script_vars.template_uri + '/template-parts/full-star-svg.php';\n        }\n        else if( rating >= (i - .75) )\n        {\n            url = global_script_vars.template_uri + '/template-parts/half-star-svg.php';\n        }\n        else\n        {\n            url = global_script_vars.template_uri + '/template-parts/empty-star-svg.php';\n        }\n\n        $.ajax({\n            method: \"GET\",\n            url: url,\n            async: false,\n            dataType: 'html',\n            success: function (data) {\n                $(element).append( data );\n                stars += data;\n            }\n        });\n    }\n}\n\nfunction addDrinkSuccess()\n{\n    jQuery('#addDrinkUpgrade')\n        .html('')\n        .removeClass('btn-secondary')\n        .addClass('btn-success')\n        .text('Drink Upgrade Added');\n    jQuery('#drinkUpgradeModalLink').addClass('d-none');\n    jQuery('#drinkUpgradeAddedText').removeClass('d-none');\n\n    jQuery('#drinkUpgradeModal').modal('hide');\n}\n\nfunction decodeHTMLEntities(text)\n{\n    var textArea = document.createElement('textarea');\n    textArea.innerHTML = text;\n    return textArea.value;\n}","jQuery(document).ready(function() {\n    var $ = jQuery;\n    let boxSizeBtns = $(\".box-size-btns button\");\n\n    let miniSnackBox = $('#crateSize4Snack');\n    let ogSnackBox = $('#crateSize8Snack');\n    let famSnackBox = $('#crateSize16Snack');\n\n    let snackQtyMini = $('#snackQty4Snack');\n    let snackQtyOg = $('#snackQty8Snack');\n    let snackQtyFam = $('#snackQty16Snack');\n\n    $(\"#addDrink\").attr( 'disabled', 'disabled' );\n    $(\"#addDrink\").prop( \"checked\", false );\n    console.log('stock spot')\n\n    if( $(\"#itemQuantity\").is(\"[data-stock]\") )\n    {\n        populateSelector( $(\"#itemQuantity\").data(\"stock\"), $(\"#itemQuantity\") );\n    }\n\n    $(boxSizeBtns).on('click', function(e){\n        $(\".country-price\").hide();\n        $(\".box-size-btns button\").removeClass(\"btn-active\");\n\n        let sizeSelected = e.currentTarget.dataset.box;\n        $(\"#\"+sizeSelected+\"_prices\").show();\n\n        e.currentTarget.classList.add(\"btn-active\");\n\n        $(\"#addToCart\").removeAttr('disabled');\n\n        if( e.currentTarget.dataset.drinkstock > 0 || e.currentTarget.dataset.preorder > 0 )\n        {\n            $(\"#addDrink\").removeAttr('disabled');\n            $(\".add-drink\").removeClass('d-none').addClass('d-flex');\n        }\n        else\n        {\n            $(\"#addDrink\").attr( 'disabled', 'disabled' );\n            $(\".add-drink\").removeClass('d-flex').addClass('d-none');\n        }\n\n        $(\"#crate_type\").val($(this).data(\"box\"));\n\n        populateSelector( e.currentTarget.dataset.stock, e.currentTarget );\n\n        if ($(ogSnackBox).hasClass('btn-active')) {\n            $(\"#freeShippingIcon\").removeClass('opacity-0').addClass('opacity-1');\n            $(snackQtyMini).addClass('d-none');\n            $(snackQtyOg).removeClass('d-none');\n            $(snackQtyFam).addClass('d-none');\n        } else if ($(famSnackBox).hasClass('btn-active')) {\n            $(\"#freeShippingIcon\").removeClass('opacity-0').addClass('opacity-1');\n            $(snackQtyMini).addClass('d-none');\n            $(snackQtyOg).addClass('d-none');\n            $(snackQtyFam).removeClass('d-none');\n        } else if ($(miniSnackBox).hasClass('btn-active')) {\n            $(\"#freeShippingIcon\").removeClass('opacity-1').addClass('opacity-0');\n            $(snackQtyMini).removeClass('d-none');\n            $(snackQtyOg).addClass('d-none');\n            $(snackQtyFam).addClass('d-none');\n        }\n    });\n\n\n    $(\"#addDrink\").on('change', function(element){\n        let drinkAddonValue = element.currentTarget.checked ? 1 : 0;\n        let priceDiffMultiplier = drinkAddonValue ? 1 : -1;\n        let drinkPrice = parseFloat( $(\"#drink_price\").val() );\n        $(\"#drink_addon\").val(drinkAddonValue);\n    \n        $(\".country-price\").each(function(i,e){\n            let oldPrice = parseFloat( $(e).text().replace( '$', '' ) );\n            let newPrice = parseFloat( oldPrice + ( drinkPrice * priceDiffMultiplier ) ).toFixed(2);\n            $(e).text( '$' + newPrice );\n        });\n\n        if( $(element.target).is(\":checked\") && !$(miniSnackBox).hasClass('btn-active'))\n        {\n            $(\"#freeShippingIcon\").removeClass('opacity-0').addClass('opacity-1');\n        }\n    });\n});\n\nfunction populateSelector( maxStock, element )\n{\n    if($(element).is(\"[data-preorder]\"))\n    {\n        return false;\n    }\n\n    maxStock = Math.min(10, maxStock);\n    $(\"#itemQuantity\").empty();\n    if(maxStock <= 0)\n    {\n        console.log(maxStock)\n        $(\"#addToCart\").attr(\"disabled\",\"disabled\").text(\"Out of Stock\");\n        $(\"#itemQuantity\").parent().hide();\n    }\n    else\n    {\n        $(\"#itemQuantity\").parent().show();\n        $(\"#addToCart\").removeAttr(\"disabled\").text(\"Add to Cart\");\n        let optionHtml = '';\n\n        for(let i = 1; i <= maxStock; i++)\n        {\n            optionHtml += `<option value=\"${i}\">${i}</option>`;\n        }\n\n        $(\"#itemQuantity\").html( optionHtml );\n    }\n}","jQuery(document).ready(function(){\n    if(document.body.dataset.namespace == 'fulfillment')\n    {\n        jQuery(\"#addBox\").on('click', function(){\n            let lastBox = jQuery(\".box-block\").last();\n            let boxCount = parseInt( jQuery(\".box-block\").last().data(\"blockcount\") ) + 1;\n\n            let newBox = jQuery(\".box-block\").last().clone();\n\n            jQuery( newBox ).data(\"blockcount\", boxCount);\n\n            jQuery( newBox ).find(\".size-select\").last().attr( \"name\", \"boxsize[\"+boxCount+\"]\" );\n            jQuery( newBox ).find(\".lb-select\").last().attr( \"name\", \"weight_lb[\"+boxCount+\"]\" ).val(0);\n            jQuery( newBox ).find(\".oz-select\").last().attr( \"name\", \"weight_oz[\"+boxCount+\"]\" ).val(0);\n\n            jQuery( newBox ).find(\".remove-box\").last().data('block', boxCount).addClass('d-block').removeClass('d-none');\n\n            jQuery( lastBox ).after( newBox );\n        });\n\n        jQuery(\"body\").on('click', '.remove-box', function(elem){\n            jQuery( elem.currentTarget ).closest(\".box-block\").remove();\n        });\n\n        /**\n         * BEGIN\n         * Fulfillment Item picker steps\n         */\n\n        jQuery(\".fulfillment-item-row\").on('click', function(event){\n            if( !jQuery(this).hasClass(\"bg-success\") )\n            {\n                let itemQty = parseInt( jQuery(this).find('[data-qty]').data('qty') );\n                let confirmation = true;\n                if( itemQty > 1 )\n                {\n                    confirmation = window.confirm(\"Please confirm that you have taken \" + itemQty + \" of this item.\");\n                }\n\n                if( confirmation )\n                {\n                    jQuery(this).addClass(\"bg-success text-white\").removeClass(\"bg-gray-light\");\n                }\n            }\n            else\n            {\n                jQuery(this).removeClass(\"bg-success text-white\");\n                if( jQuery(this).hasClass('odd') )\n                {\n                    jQuery(this).addClass(\"bg-gray-light\");\n                }\n            }\n\n            if( jQuery(\".fulfillment-item-row\").length == jQuery(\".fulfillment-item-row.bg-success\").length)\n            {\n                jQuery(\"#print_label\").removeAttr('disabled');\n            }\n            else\n            {\n                jQuery(\"#print_label\").attr('disabled', 'disabled');\n            }\n        });\n    }\n});\n\nfunction nextOrder(setFulfilled)\n{\n    let orderIds = jQuery( \"input[name='ids']\" ).val();\n\n    let postData = {\n        ids: orderIds,\n        setFulfilled: setFulfilled,\n        action: 'next_order_fulfillment',\n    };\n    \n    submitAjaxForm(\"/wp-admin/admin-ajax.php\", postData, '');\n}","document.addEventListener('DOMContentLoaded', function() {\n    jQuery('[type=\"search\"]').on('keyup', function(e){\n        if(e.originalEvent.which == 13)\n        {\n            runSearch(e.currentTarget.value);\n        }\n    });\n    jQuery(\"#searchSubmit\").on('click', function(e){\n        e.preventDefault();\n        runSearch(jQuery('[type=\"search\"]').val());\n    });\n});\n\nfunction runSearch(str)\n{\n    window.location.href = '/shop-all?search=' + str;\n}","let currentUrl = new URL(window.location.href);\nconst baseUrl = currentUrl.origin + currentUrl.pathname;\nlet urlParams = new URLSearchParams(currentUrl.search);\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    if(document.body.dataset.namespace == 'shop-all')\n    {\n        let filters = {};\n        let filterMsg = document.getElementById(\"filterMsg\");\n        let snacks = document.getElementsByClassName(\"taxItem\");\n        \n        if(urlParams.has('c'))\n        {\n            let countrySlug = urlParams.get('c');\n            if( document.getElementById(countrySlug + \"_countries_filter\") )\n            {\n                filters['countries'] = countrySlug;\n                updateFilters(filters, 'countries', snacks);\n                document.getElementById(countrySlug + \"_countries_filter\").checked = true;\n                jQuery('#countriesRemoveFilter').prop('disabled', false);\n            }\n            else\n            {\n                updateHistoryState('countries', 'remove');\n            }\n\n            // show filterMsg on load if filters are applied\n            if (jQuery('.taxItem:visible').length == 0) {\n                filterMsg.style.display = \"block\";\n            } else {\n                filterMsg.style.display = \"none\";\n            }\n        }\n        if(urlParams.has('t'))\n        {\n            let typeSlug = urlParams.get('t');\n            if( document.getElementById(typeSlug + \"_snack_types_filter\") )\n            {\n                filters['snack_types'] = typeSlug;\n                updateFilters(filters, 'snack_types', snacks);\n                document.getElementById(typeSlug + \"_snack_types_filter\").checked = true;\n                jQuery('#snack_typesRemoveFilter').prop('disabled', false);\n            }\n            else\n            {\n                updateHistoryState('snack_types', 'remove');\n            }\n\n            // show filterMsg on load if filters are applied\n            if (jQuery('.taxItem:visible').length == 0) {\n                filterMsg.style.display = \"block\";\n            } else {\n                filterMsg.style.display = \"none\";\n            }\n        }\n\n        document.body.addEventListener('change', function (e) {\n            let target = e.target;\n            if(target.getAttribute(\"name\").includes(\"_filter\"))\n            {\n                let filterTarget = target.id.split(\"_\")[0];\n                let filterType = target.name.replace(\"_filter\", \"\");\n                filters[filterType] = filterTarget;\n\n                if(filterType == 'snack_types' && urlParams.has('search'))\n                {\n                    window.location.href = window.location.href.split('?')[0] + \"?t=\" + filterTarget;\n                    jQuery(`#${filterType}RemoveFilter`).prop('disabled', false);\n                }\n                else\n                {\n                    updateFilters(filters, filterType, snacks);\n                    jQuery(`#${filterType}RemoveFilter`).prop('disabled', false);\n                }\n\n                updateHistoryState(filterType, \"add\", filterTarget);\n            }\n\n            // show filterMsg if no snacks visible\n            if (jQuery('.taxItem:visible').length == 0) {\n                filterMsg.style.display = \"block\";\n            } else {\n                filterMsg.style.display = \"none\";\n            }\n        });\n        document.body.addEventListener('removeFilter', function (e) {\n            let type = e.detail.dataset.taxonomy;\n            delete filters[type];\n            let target = null;\n            let filterType = null;\n            if(Object.keys(filters).length > 0)\n            {\n                if(type == 'snack_types')\n                {\n                    target = document.querySelector('input[name=\"countries_filter\"]:checked');\n                    filterType = 'countries';\n                }\n                else\n                {\n                    target = document.querySelector('input[name=\"snack_types_filter\"]:checked');\n                    filterType = 'snack_types';\n                }\n            }\n            updateFilters(filters, filterType, snacks);\n            filterMsg.style.display = \"none\";\n        });\n    } \n});\n\n    // querySelector returns the first element it finds with the correct selector\n    // so it needs a unique class name or you're only grabbing one element\njQuery(document).ready(function() {\n    if(document.body.dataset.namespace == 'shop-all')\n    {\n        document.querySelector('#filterBtn').addEventListener('click', function(e) {\n            // from https://www.jamestease.co.uk/blether/add-remove-or-toggle-classes-using-vanilla-javascript\n            // querySelectorAll returns a nodeList, so map to to an array and BOOM\n            // if there's only one element to toggle, you can skip the array\n            // and grab it with a simple querySelector\n            [].map.call(document.querySelectorAll('.filter-wrap'), function(el) {\n                // classList supports 'contains', 'add', 'remove', and 'toggle'\n                el.classList.toggle('toggled');\n            });\n        });\n    }\n});\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    if(document.body.dataset.namespace == 'shop-all')\n    {\n        // Gradient & Filter for Shop All\n        jQuery( \".taxonomy_container .term_container:nth-child(6)\").addClass(\"linGradient\");\n        jQuery( \".taxonomy_container .term_container:nth-child(n+7)\").addClass(\"d-none\");\n\n\n        let seeMoreCat = document.getElementsByClassName('seeMoreCat');\n        let seeMoreIcon = document.getElementsByClassName('seeMoreIcon');\n        let seeMoreCatText = document.getElementsByClassName('seeMoreCatText');\n        let linGradient = document.querySelectorAll('.taxonomy_container .term_container:nth-child(6)');\n\n        let searchDiv = document.querySelectorAll('#search-filter div');\n        let showContent = false;\n\n\n        for(var i=0; i < seeMoreCat.length; i++) {\n            (function(index) {\n                seeMoreCat[index].addEventListener(\"click\", function(e) {\n                    let target = e.currentTarget;\n                    let parent = target.parentElement.id;\n                    let linGradientItem = document.querySelectorAll('#' + parent + '.taxonomy_container .term_container:nth-child(n+7)');\n\n                    showContent = !showContent;\n\n                    if (showContent === true) {\n                        seeMoreCat[index].classList.add('active');\n                        seeMoreCatText[index].innerHTML = \"Show Less\";\n                        linGradient[index].classList.remove('linGradient');\n                        linGradientItem.forEach(el => el.classList.remove('d-none'));\n                        seeMoreIcon[index].classList.add('fa-minus');\n                        seeMoreIcon[index].classList.remove('fa-plus');\n                    } else {\n                        seeMoreCat[index].classList.remove('active');\n                        seeMoreCatText[index].innerHTML = \"Show More\";\n                        linGradient[index].classList.add('linGradient');\n                        linGradientItem.forEach(el => el.classList.add('d-none'));\n                        seeMoreIcon[index].classList.remove('fa-minus');\n                        seeMoreIcon[index].classList.add('fa-plus');\n                    }\n                })\n            })(i);\n        }\n    }\n});\n\n// Equal Heights\n(function () {\n    equalHeight(false);\n})();\n\nwindow.onresize = function(){\n    equalHeight(true);\n}\n\n\nfunction toTitleCase(str) {\n    return str.replace(/\\w\\S*/g, function(txt){\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n    });\n}\n\nfunction updateFilters(filters, filterType, snacks)\n{\n    let filtersArr = Object.values(filters);\n\n    if( filterType === null )\n    {\n        document.getElementById(\"filter-display\").innerHTML = '';\n    }\n    else\n    {\n        if('snack_types' in filters && 'countries' in filters)\n        {\n            document.getElementById(\"filter-display\").innerHTML =  toTitleCase(filters['snack_types'].replace('-',' ')) + ' &#x2192; ' + toTitleCase(filters['countries'].replace('-',' '));\n        }\n        else\n        {\n            document.getElementById(\"filter-display\").innerHTML = toTitleCase(filtersArr[0].replace('-',' '));\n        }\n\n    }\n    \n    for (var i = 0; i < snacks.length; i++) \n    {\n        let taxonomies = [\n            snacks[i].dataset.type,\n            JSON.parse(snacks[i].dataset.countries)\n        ].flat();\n        \n        let intersection = taxonomies.filter(x => filtersArr.includes(x));\n\n        if(filtersArr.length <= intersection.length)\n        {\n            snacks[i].style.display = \"block\";\n        }\n        else\n        {\n            snacks[i].style.display = \"none\";\n        }\n    }\n}\n\nfunction equalHeight(resize) {\n    var elements = document.getElementsByClassName(\"equalHeight\"),\n    allHeights = [],\n    i = 0;\n    if(resize === true){\n        for(i = 0; i < elements.length; i++){\n            elements[i].style.height = 'auto';\n        }\n    }\n    for(i = 0; i < elements.length; i++){\n        var elementHeight = elements[i].clientHeight;\n        allHeights.push(elementHeight);\n    }\n    for(i = 0; i < elements.length; i++){\n        elements[i].style.height = Math.max.apply( Math, allHeights) + 'px';\n        // Optional: Add show class to prevent FOUC\n        if(resize === false){\n            elements[i].className = elements[i].className + \" show\";\n        }\n    }\n}\n\nfunction updateHistoryState(taxonomy, action = \"remove\", term = null)\n{\n    switch( taxonomy )\n    {\n        case 'snack_types':\n            if(action == \"remove\" && urlParams.has('t'))\n            {\n                urlParams.delete('t');\n            }\n            else if(action = \"add\")\n            {\n                urlParams.delete('t');\n                urlParams.append('t', term);\n            }\n            break;\n        case 'countries':\n            if(action == \"remove\" && urlParams.has('c'))\n            {\n                urlParams.delete('c');\n            }\n            else if(action = \"add\")\n            {\n                urlParams.delete('c');\n                urlParams.append('c', term);\n            }\n            break;\n    }\n\n    let newUrl = baseUrl + \"?\" + urlParams.toString();\n    newUrl = newUrl.replace(/\\?\\s*$/, \"\"); // remove trailing ?\n    window.history.replaceState({}, document.title, newUrl);\n}\n\nfunction removeFilter(term)\n{\n    if(document.querySelectorAll(\"input[name='\"+term.dataset.taxonomy+\"_filter']:checked\").length)\n    {\n        document.querySelectorAll(\"input[name='\"+term.dataset.taxonomy+\"_filter']:checked\")[0].checked = false;\n    }\n\n    updateHistoryState(term.dataset.taxonomy, 'remove');\n\n    let event = new CustomEvent(\"removeFilter\", {detail: term});\n    document.body.dispatchEvent(event);\n    jQuery(`#${term.dataset.taxonomy}RemoveFilter`).prop('disabled', true);\n}\n","const actionUrl = \"/wp-admin/admin-ajax.php\";\n$(document).ready(function() {\n    // stop videos from playing when modal is closed, sets header z-index back to default\n    $('.modal.fade').on('hidden.bs.modal', function (e) {\n        $('#unboxVidModal iframe').attr('src', $('#unboxVidModal iframe').attr('src'));\n    });\n\n    // change plus icon to minus when #readMoreAccordion is open\n    $('#readMoreAccordionBtn').on('click', function (e) {\n        if (!$('#readMoreCollapse').hasClass('show')) {\n            $('#readMoreAccordionBtn').html('Read less <span class=\"h9 h7-xl ml-1 align-middle\"><i class=\"fas fa-minus\"></i></span>');\n        } else {\n            $('#readMoreAccordionBtn').html('Read more <span class=\"h9 h7-xl ml-1 align-middle\"><i class=\"fas fa-plus\"></i></span>');\n        }\n    });\n\n    // change plus icon to minus when .size-accordions are open\n    $('.size-btn').on('click', function (e) {\n        let size = e.currentTarget.dataset.size\n        if (!$(`#${size}Collapse`).hasClass('show')) {\n            $(`#${size}AccordionBtn span`).html(\"<i class='fas fa-minus'></i>\");\n        } else {\n            $(`#${size}AccordionBtn span`).html(\"<i class='fas fa-plus'></i>\");\n        }\n    });\n\n    // recipe video\n    $('#openRecipeVid').on('click', function (e) {\n        $('#thumbnail').addClass('open');\n        $('#embedVid').addClass('open');\n    });\n\n    $('#closeRecipeVid').on('click', function (e) {\n        $('#embedVid iframe').attr('src', $('#embedVid iframe').attr('src'));\n        $('#embedVid').removeClass('open');\n        $('#thumbnail').removeClass('open');\n    });\n\n    // recipe accordion\n    $('#viewFullRecipeBtn').on('click', function (e) {\n        $('#viewFullRecipeBtn').addClass('d-none');\n        $('#viewLessRecipeBtn').removeClass('d-none');\n    });\n\n    $('#viewLessRecipeBtn').on('click', function (e) {\n        $('#viewFullRecipeBtn').removeClass('d-none');\n        $('#viewLessRecipeBtn').addClass('d-none');\n    });\n\n    // trivia questions\n    let answers = $('form .single-answer');\n\n    $(answers).on('click', function(e){\n        let answer = e.currentTarget;\n\n        let questionForm = $(answer).closest( \"form.ajax_form\" );\n\n        $(questionForm).find(\"input[name='answer']\").val( answer.dataset.answer );\n\n        $(questionForm).submit();\n        \n        if (!$(answer).hasClass('correct')) {\n            // show answer is incorrect\n            $(answer).addClass('incorrect-answer text-white');\n            $(answer).children('.user-percentage').addClass('incorrect-answer d-block').removeClass('d-none');;\n            // show correct answer\n            $(answer).siblings('.correct').addClass('correct-answer');\n            $(answer).siblings('.correct').children('.user-percentage').addClass('correct-answer d-block').removeClass('d-none');\n        } else {\n            $(answer).addClass('correct-answer');\n            $(answer).children('.user-percentage').addClass('correct-answer d-block').removeClass('d-none');\n        }\n\n        // show user-percentage for all answers\n        $(answer).siblings().children('.user-percentage').addClass('d-block').removeClass('d-none');\n\n        // disable all answer buttons\n        $(answer).siblings().prop('disabled', true);\n        $(answer).prop('disabled', true);\n    });\n\n    // snack poll\n    let snackPollTriggers = $('.poll-modal-trigger');\n\n    $(snackPollTriggers).on('click', function(e){\n        var type;\n        if ($(e.currentTarget).hasClass('best-btn')) {\n            $('#snackPollCategory').text('Best');\n            type = 'best';\n        } else if ($(e.currentTarget).hasClass('worst-btn')) {\n            $('#snackPollCategory').text('Worst');\n            type = 'worst';\n        } else if ($(e.currentTarget).hasClass('weird-btn')) {\n            $('#snackPollCategory').text('Weirdest');\n            type = 'weird';\n        }\n\n        $('#snackSuperlativeForm input[name=\"type\"]').val(type);\n        $('#snackSuperlativeForm button.single-snack').unbind('click');\n        $('#snackSuperlativeForm button.single-snack').on('click', function(btn) {\n            $('#snackSuperlativeForm input[name=\"snack_id\"]').val( btn.currentTarget.dataset.snackid );\n            $('#snackSuperlativeForm').submit();\n            equalHeight(true);\n        });\n    });\n\n    initializeStarReviews();\n    document.body.addEventListener('containerLoaded', function(e) {\n        initializeStarReviews();\n    });\n\n    const urlParams = new URLSearchParams( window.location.search );\n    if(urlParams.has('ref') && urlParams.get('ref') == 'qr')\n    {\n        $('#signinModal').modal('show');\n    }\n\n    // add drink upgrade\n    $('#addDrinkUpgrade').on('click', function(e) {\n        $('#addDrinkUpgrade').attr('disabled', true);\n        $('#addDrinkUpgrade').text('');\n        $('#addDrinkUpgrade').html(`<div class=\"spinner-border text-light\" role=\"status\">\n            <span class=\"sr-only\">Loading...</span>\n        </div>`);\n\n        let postData = {\n            action: 'add_drink',\n            subscription_id: $(\"input[name='drinkless_subscription_id']\").val(),\n            old_plan: $(\"input[name='drinkless_subscription_plan']\").val(),\n            currency_code: $(\"input[name='user_currency_code']\").val(),\n            external_id: $(\"input[name='drinkless_subscription_stripe_id']\").val(),\n        };\n\n        let originalText = 'Add Drink Upgrade';\n\n        submitAjaxForm(actionUrl, postData, originalText, e.currentTarget);\n    });\n});\n\n\n\nfunction initializeStarReviews()\n{\n    // review star btns\n    let starBtns = $('.review-stars .star-btn');\n    let rating = 0;\n    $(starBtns).unbind('click');\n    $(starBtns).on('click', function(e){\n        let star = e.currentTarget;\n        let parent = star.parentNode;\n\n        parent.style.opacity = 0.2;\n\n        // The equivalent of parent.children.indexOf(child)\n        rating = Array.prototype.indexOf.call(parent.children, star) + 1;\n\n        $(star).parent().children().each( function(idx, elem) {\n            if(idx < rating)\n            {\n                $(elem).addClass('full').removeClass('empty');\n            }\n            else\n            {\n                $(elem).removeClass('full').addClass('empty');\n            }\n        });\n        \n        \n        let postData = {\n            \"rating\": rating,\n            \"snack_id\": parent.dataset.snackid,\n            \"action\": 'add-rating'\n        };\n\n        submitAjaxForm(\"/wp-admin/admin-ajax.php\", postData, null, null);\n            \n        parent.style.opacity = 1;\n    });\n}","document.addEventListener('AppleIDSignInOnSuccess', (data) => {\n    let detail = data.detail;\n    detail.origin = 'login';\n\n    jQuery.ajax({\n        url: \"/wp-content/themes/wp-bootstrap-starter-child/lib/AppleSignin.php\",\n        type: \"POST\",\n        beforeSend: function(xhr){xhr.setRequestHeader('csrf_token', jQuery('meta[name=\"csrf-token\"]').attr('content'));},\n        data: detail ,\n        dataType: \"json\",\n        async: true,\n        success: function(response) {\n            let r = (Math.random() + 1).toString(36).substring(2);\n\n            let actionUrl = \"/wp-admin/admin-ajax.php\";\n            let postData = {\n                'pwd': r,\n                'email': response.data.email,\n                'method': 'AppleID',\n                'action': 'sc_login',\n            };\n            submitAjaxForm(actionUrl, postData, '');\n        },\n        error: function(error) {\n            console.error('Error: ', error);\n            jQuery(\".form-error\").show().text(error.responseJSON.data);\n        }\n    });\n});\n//Listen for authorization failures\ndocument.addEventListener('AppleIDSignInOnFailure', (error) => {\n    console.error(error);\n});\n\nvar CCev = false;\nvar APev = false;\njQuery(document).ready(function() {\n\n    if(document.body.dataset.namespace == 'checkout-confirm-pay')\n    {\n        var stripeAP;\n        let total = parseInt( Math.round(document.getElementsByName('total_amount')[0].value * 100) );\n        if (window.location.href.indexOf('local') !== -1 || window.location.href.indexOf('snackbar') !== -1 || window.location.href.indexOf('candybar-dev') !== -1) {\n            stripeAP = Stripe('pk_test_n3rrzyh2ClIZlnCntL9X8IRx');\n        }\n        else\n        {\n            stripeAP = window.Stripe('pk_live_3L8cvOKHqpOpDF3JXfZqZTd2');\n        }\n\n        var paymentRequestAP = stripeAP.paymentRequest({\n            country: 'US',\n            currency: 'usd',\n            total: {\n                label: \"SnackCrate\",\n                amount: total,\n            },\n            requestPayerName: false,\n            requestPayerEmail: false,\n            requestShipping: false,\n        });\n\n        var elements = stripeAP.elements();\n        var prButton = elements.create('paymentRequestButton', {\n            paymentRequest: paymentRequestAP,\n            style: {\n                paymentRequestButton: {\n                    type: 'default', // default: 'default'\n                    theme: 'dark', // default: 'dark'\n                    height: '56px', // default: '40px', the width is always '100%'\n                },\n            },\n        });\n    \n        // Check the availability of the Payment Request API first.\n        paymentRequestAP.canMakePayment().then(function(result) {\n            if (result) {\n                prButton.mount('#payment-request-button-applepay');\n                document.getElementById('apple-pay-window').style.display = 'block';\n            } else {\n                document.getElementById('apple-pay-window').style.display = 'none';\n            }\n        });\n    \n        paymentRequestAP.on('token', function(ev) {\n            // Send the token to your server to charge it!\n            console.log(ev)\n            ev.complete('success');\n            CCev = false;\n            APev = ev;\n            \n            let response = (APev) ? APev : CCev;\n\n            let actionUrl = \"/wp-admin/admin-ajax.php\";\n            let postData = {\n                'action': 'sc_confirm_payment',\n                'payment_method': response.methodName,\n                'token': response.token.id,\n            };\n            \n            submitAjaxForm(actionUrl, postData, '');\n        });\n        paymentRequestAP.on('cancel', function(ev) {\n            // Send the token to your server to charge it!\n            console.log('fail');\n            ev.complete('fail');\n        });\n    }    \n});\n","jQuery(document).ready(function() {\n    var $ = jQuery;\n\n    \n\n    if ($( window ).width() >= 768) { \n        $('#holidayLandingVid').html(`<video class=\"position-absolute rounded\" preload=\"auto\" playsinline autoplay muted loop>\n            <source src=\"/wp-content/uploads/2022/11/HolidayMastHead_CandyBar_1280x720-center-min.mp4\" type=\"video/mp4\">\n        </video>`);\n    };\n});","jQuery(document).ready(function() {\n    var $ = jQuery;\n\n    if ($( window ).width() >= 768) { \n        $('#holidayHomeVid').html(`<video class=\"position-absolute country-loop\" preload=\"auto\" playsinline autoplay muted loop>\n            <source src=\"/wp-content/uploads/2022/11/HolidayMastHead_CandyBar_1280x720_v6.mp4\" type=\"video/mp4\">\n        </video>`);\n    };\n});","jQuery( document ).ready(function() {\n    jQuery('#signIn input[type=\"checkbox\"]').on('change', function () {\n        jQuery(this).prev().toggleClass('fa-eye').toggleClass('fa-eye-slash');\n        let inputType =\n            jQuery('#signIn #password').prop('type') === 'password'\n                ? 'text'\n                : 'password';\n        jQuery('#signIn #password').prop('type', inputType);\n    });\n});","jQuery(document).ready(function() {\n    var $ = jQuery;\n\n    $('.countries-menu-mobile li.geography > a').on('click', function (event) {    \n        $(this).parent().parent().css('transform','translate3d(-100vw, 0px, 0px)');\n        $(this).parent().children('ul.sub-menu-mobile').addClass('show-menu');\n        return false;\n    });\n\n    $('.menu-back').on('click', function (event) {\n        $(this).parent().parent().parent().css('transform','translate3d(0%, 0px, 0px)');\n        $(this).parent().parent().children('ul.sub-menu-mobile').removeClass('show-menu');\n        return false;\n    });\n\n    // add background overlay when mobile nav is open\n    $( '.navbar-toggler' ).unbind( \"click\" );\n    $('.navbar-toggler').click(function (e) {\n        $('.site-content').css('transition', 'none');\n        $('.site-content').css('padding-top', '34px');\n        $('body').addClass('noscroll');\n        $('#header').css('z-index', 'unset');\n        $('#header').css('margin-top', '-34px');\n        $('#header').removeClass('fixed-top');\n        $('#header').addClass('position-relative');\n        $('#secondary-header').css('z-index', 'unset');\n        $('body').append('<div class=\"overlay fixed-top fixed-bottom\"></div>');\n    });\n\n    // remove background overlay when mobile nav is closed\n    $('#collapse-close').on('click', function () {\n        $('.site-content').css('padding-top', '131px');\n        $('body').removeClass('noscroll');\n        $('#header').css('z-index', 1050);\n        $('#header').css('margin-top', 'unset');\n        $('#header').removeClass('position-relative');\n        $('#header').addClass('fixed-top');\n        $('#secondary-header').css('z-index', 1050);\n        $('.overlay').remove();\n        setTimeout(() => {$('.site-content').css('transition', 'all .3s ease')}, 100);\n    });\n\n    // close mobile nav when user clicks login and signinModal is open\n    $('#signInTrigger').on('click', function () {\n        $('.site-content').css('padding-top', '131px');\n        $('body').removeClass('noscroll');\n        $('#navbarToggler').removeClass('show');\n        $('#navbarToggler').removeClass('collapse');\n        $('#navbarToggler').addClass('collapsing');\n        $('#navbarToggler').removeClass('collapsing');\n        $('#navbarToggler').addClass('collapse');\n        $('#header').css('margin-top', 'unset');\n        $('#header').removeClass('position-relative');\n        $('#header').addClass('fixed-top');\n        $('.overlay').remove();\n    });\n\n    // change header z-index when modal is shown so it appears behind modal backdrop\n    let modalArray = ['#viewSpecsModal', '#editShippingAddressModal-0', '#editPaymentModal-0', '#snackRatingModal', '#signinModal', '#snackPollModal', '#unboxVidModal', '#drinkUpgradeModal'];\n\n    modalArray.forEach(function(modal) {\n        $(modal).on('show.bs.modal', function () {\n            $('#header').css('z-index', 'unset');\n            $('#secondary-header').css('z-index', 'unset');\n        });\n\n        $(modal).on('hidden.bs.modal', function () {\n            $('#header').css('z-index', 1050);\n            $('#secondary-header').css('z-index', 1050);\n        });\n    });\n\n    // remove overlay if user increases browser width > 992px, add overlay if user descreases browser width < 992px while navbar-collapse is shown\n    var resizeTimer;\n\n    $(window).on('resize', function() {\n\n        clearTimeout(resizeTimer);\n        resizeTimer = setTimeout(function() {\n\n            if ($( window ).width() > 992) {\n                $('.overlay').remove();\n            } \n            else if ($( window ).width() < 992 && $('.navbar-collapse').hasClass('show') && $('.overlay').length < 1) {\n                $('body').append('<div class=\"overlay fixed-top fixed-bottom\"></div>');\n            }\n                    \n        }, 100);\n    });\n\n    // hide nav on scroll down, show nav on scroll up\n    const headerElem  = $('#header');\n    const headerElemHeight = headerElem.outerHeight();\n    const secHeaderHeight = $('#secondary-header').outerHeight();\n    const countriesMenuDialog = $('#countriesMenuModalDialog');\n\n    // set top of countries-menu = to header + secondary-header height\n    $(countriesMenuDialog).css('top', `calc(${secHeaderHeight}px + ${headerElemHeight}px)`);\n\n    if ($(document).scrollTop() <= 0 ) {\n        $(headerElem).css('top', `${secHeaderHeight}px`);\n        $(countriesMenuDialog).css('top', `calc(${secHeaderHeight}px + ${headerElemHeight}px)`);\n        $('#content').css('padding-top', `${headerElemHeight}px`);\n    } else {\n        $(headerElem).css('top', '0');\n        $(countriesMenuDialog).css('top', `${headerElemHeight}px`);\n        $('#content').css('padding-top', `${headerElemHeight - secHeaderHeight}px`);\n    }\n\n    $(window).on('scroll', function() {\n        const headerElemHeight = headerElem.outerHeight();\n        const secHeaderHeight = $('#secondary-header').outerHeight();\n\n        // secondary-header only visible at top of page, adjust countries-menu top if user tries to open on scroll up before top of page\n        if ($(document).scrollTop() <= 0 ) {\n            $(headerElem).css('top', `${secHeaderHeight}px`);\n            $(countriesMenuDialog).css('top', `calc(${secHeaderHeight}px + ${headerElemHeight}px)`);\n            $('#content').css('padding-top', `${headerElemHeight}px`);\n        } else {\n            $(headerElem).css('top', '0');\n            $(countriesMenuDialog).css('top', `${headerElemHeight}px`);\n            $('#content').css('padding-top', `${headerElemHeight - secHeaderHeight}px`);\n        }\n\n        // Catch false equivelance glitch\n        if ( this.oldScroll === this.scrollY ) {\n            return null;\n        } else if ( this.oldScroll >= this.scrollY || this.scrollY < 0 ) {\n            $(headerElem).removeClass('hide');\n        } else if ( this.scrollY >= headerElemHeight ) {\n            $(headerElem).addClass('hide');\n        }\n\n        this.oldScroll = this.scrollY;\n    })\n\n    $(window).on('resize', function() {\n        const headerElemHeight = headerElem.outerHeight();\n        const secHeaderHeight = $('#secondary-header').outerHeight();\n\n        // set top of header = to secondary-header-height on resize\n        $(headerElem).css('top', `${secHeaderHeight}px`);\n        $('#content').css('padding-top', `${headerElemHeight}px`);\n\n        // set top of countries-menu = to header + secondary-header height\n        if ($(document).scrollTop() == 0 ) {\n            $(countriesMenuDialog).css('top', `calc(${secHeaderHeight}px + ${headerElemHeight}px)`);\n        } else {\n            $(countriesMenuDialog).css('top', `${headerElemHeight}px`);\n        }\n    });\n});"]}